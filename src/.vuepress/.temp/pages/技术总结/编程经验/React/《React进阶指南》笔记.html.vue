<template><blockquote>
<p>åŸæ–‡ï¼š<a href="https://juejin.cn/book/6945998773818490884" target="_blank" rel="noopener noreferrer">ã€ŠReact è¿›é˜¶æŒ‡å—ã€‹<ExternalLinkIcon/></a>
ä¸ªäºº demo: demo/react-demo
æºç ï¼š</p>
</blockquote>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>git clone https://hub.fastgit.org/facebook/react.git
git checkout v16.19
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="è®¤è¯†-jsx" tabindex="-1"><a class="header-anchor" href="#è®¤è¯†-jsx" aria-hidden="true">#</a> è®¤è¯† JSX</h1>
<h2 id="jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ" aria-hidden="true">#</a> JSX è¢« React å¤„ç†æˆä»€ä¹ˆ</h2>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>const toLearn = [ 'react' , 'vue' , 'webpack' , 'nodejs'  ]

const TextComponent = ()=> &lt;div> hello , i am function component &lt;/div>

class Index extends React.Component{
    status = false /* çŠ¶æ€ */
    renderFoot=()=> &lt;div> i am foot&lt;/div>
    render(){
        /* ä»¥ä¸‹éƒ½æ˜¯å¸¸ç”¨çš„jsxå…ƒç´ èŠ‚ */
        return &lt;div style={{ marginTop:'100px' }}   >
            { /* element å…ƒç´ ç±»å‹ */ }
            &lt;div>hello,world&lt;/div>
            { /* fragment ç±»å‹ */ }
            &lt;React.Fragment>
                &lt;div> ğŸ‘½ğŸ‘½ &lt;/div>
            &lt;/React.Fragment>
            { /* text æ–‡æœ¬ç±»å‹ */ }
            my name is alien
            { /* æ•°ç»„èŠ‚ç‚¹ç±»å‹ */ }
            { toLearn.map(item=> &lt;div key={item} >let us learn { item } &lt;/div> ) }
            { /* ç»„ä»¶ç±»å‹ */ }
            &lt;TextComponent/>
            { /* ä¸‰å…ƒè¿ç®— */  }
            { this.status ? &lt;TextComponent /> : &lt;div>ä¸‰å…ƒè¿ç®—&lt;/div> }
            { /* å‡½æ•°æ‰§è¡Œ */ }
            { this.renderFoot() }
            &lt;button onClick={ ()=> console.log( this.render() ) } >æ‰“å°renderåçš„å†…å®¹&lt;/button>
        &lt;/div>
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ol>
<li>babel ç¼–è¯‘ï¼šReact.createElement, æ³¨æ„ 3 ä¸ªå‚æ•°ä½œç”¨
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/JSX-babel.awebp" alt=""></li>
<li>createElement å¤„ç†åçš„æ ·å­ æ³¨æ„è½¬æ¢ç±»å‹çš„æ˜ ç…§å…³ç³»
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/jsx-creatElement.awebp" alt=""></li>
<li>React åº•å±‚è°ƒå’Œå¤„ç†åï¼Œç»ˆå°†å˜æˆä»€ä¹ˆï¼Ÿ
React element å¯¹è±¡çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½ä¼šå½¢æˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ fiber å¯¹è±¡ï¼Œç„¶åé€šè¿‡ siblingã€returnã€child å°†æ¯ä¸€ä¸ª fiber å¯¹è±¡è”ç³»èµ·æ¥ã€‚</li>
</ol>
<h2 id="react-api" tabindex="-1"><a class="header-anchor" href="#react-api" aria-hidden="true">#</a> React API</h2>
<ul>
<li>React.Children.toArrayï¼Œæ‰å¹³åŒ–ï¼Œè§„èŒƒåŒ– children æ•°ç»„</li>
<li>React.Children.forEachï¼Œéå† childrenï¼Œå†…éƒ¨å·²æ‰å¹³åŒ– children</li>
<li>React.createElement</li>
<li>react.cloneElement</li>
</ul>
<h2 id="qa" tabindex="-1"><a class="header-anchor" href="#qa" aria-hidden="true">#</a> QA</h2>
<ol>
<li>è€ç‰ˆæœ¬çš„ React ä¸­ï¼Œä¸ºä»€ä¹ˆå†™ jsx çš„æ–‡ä»¶è¦é»˜è®¤å¼•å…¥ React</li>
</ol>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>import React from 'react'
function Index(){
    return &lt;div>hello,world&lt;/div>
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç­”ï¼šå› ä¸º jsx åœ¨è¢« babel ç¼–è¯‘åï¼Œå†™çš„ jsx ä¼šå˜æˆä¸Šè¿° React.createElement å½¢å¼ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ Reactï¼Œé˜²æ­¢æ‰¾ä¸åˆ° React å¼•èµ·æŠ¥é”™ã€‚</p>
<h1 id="component" tabindex="-1"><a class="header-anchor" href="#component" aria-hidden="true">#</a> Component</h1>
<p>å¯é€šè¿‡åŸå‹é“¾çš„æ–¹å¼ç»™ç±»å¢åŠ é»˜è®¤æ“ä½œ</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>class Index extends React.Component{
    constructor(...arg){
       super(...arg)                        /* æ‰§è¡Œ react åº•å±‚ Component å‡½æ•° */
    }
    state = {}                              /* state */
    static number = 1                       /* å†…ç½®é™æ€å±æ€§ */
    componentDidMount(){                    /* ç”Ÿå‘½å‘¨æœŸ */
        console.log(Index.number,Index.number1) // æ‰“å° 1 , 2
    }
    render(){                               /* æ¸²æŸ“å‡½æ•° */
        return &lt;div style={{ marginTop:'50px' }} onClick={ this.handerClick }  >hello,React!&lt;/div>
    }
}
Index.number1 = 2                           /* å¤–ç½®é™æ€å±æ€§ */
Index.prototype.handleClick = ()=> console.log(222) /* æ–¹æ³•: ç»‘å®šåœ¨ Index åŸå‹é“¾çš„ æ–¹æ³•*/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ç»„ä»¶çš„ç»§æ‰¿ï¼šstate å’Œç”Ÿå‘½å‘¨æœŸä¼šè¢«ç»§æ‰¿åçš„ç»„ä»¶ä¿®æ”¹ã€‚åƒä¸‹åˆ— demo ä¸­ï¼ŒPerson ç»„ä»¶ä¸­çš„ componentDidMount ç”Ÿå‘½å‘¨æœŸå°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>/* äººç±» */
class Person extends React.Component{
    constructor(props){
        super(props)
        console.log('hello , i am person')
    }
    componentDidMount(){ console.log(1111)  }
    eat(){    /* åƒé¥­ */ }
    sleep(){  /* ç¡è§‰ */  }
    ddd(){   console.log('æ‰“è±†è±†')  /* æ‰“è±†è±† */ }
    render(){
        return &lt;div>
            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸€ä¸ªperson
        &lt;/div>
    }
}
/* ç¨‹åºå‘˜ */
class Programmer extends Person{
    constructor(props){
        super(props)
        console.log('hello , i am Programmer too')
    }
    componentDidMount(){  console.log(this)  }
    code(){ /* æ•²ä»£ç  */ }
    render(){
        return &lt;div style={ { marginTop:'50px' } } >
            { super.render() } { /* è®© Person ä¸­çš„ render æ‰§è¡Œ */ }
            æˆ‘è¿˜æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼    { /* æ·»åŠ è‡ªå·±çš„å†…å®¹ */ }
        &lt;/div>
    }
}
export default Programmer
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«ï¼š</p>
<ol>
<li>ç±»ç»„ä»¶çš„æœ¬è´¨å°±æ˜¯ ç±»å’Œå‡½æ•°è¿˜æœ‰ oop æ€æƒ³ä¸­çš„ç»§æ‰¿ï¼Œåœ¨æ­¤ä¹‹ä¸Šéœ€è¦å†…ç½®å¤„ç† state å’Œ props ç»„ä»¶çš„çŠ¶æ€ç»´æŠ¤ï¼ŒçŠ¶æ€ -&gt; ui -&gt; æ¸²æŸ“</li>
<li>å‡½æ•°ç»„ä»¶ æ²¡æœ‰å®ä¾‹åŒ–çš„æ¦‚å¿µï¼ŒFP æ€æƒ³ï¼Œæ¯ä¸ªç»„ä»¶åº”è¯¥åªå¤„ç†ä¸€ä¸ªé€»è¾‘äº‹ç‰©ä¸æƒ³ class ç»„ä»¶é‚£ä¹ˆå¤åˆï¼Œå¦å¤–å®ƒæ²¡æœ‰è½¬æ€å­˜å‚¨èƒ½åŠ›å¿…é¡»ä¾èµ– hook</li>
</ol>
<h2 id="state" tabindex="-1"><a class="header-anchor" href="#state" aria-hidden="true">#</a> State</h2>
<p>ç»„ä»¶åˆå§‹åŒ–è¿‡ç¨‹ä¸­ç»‘å®šäº†è´Ÿè´£æ›´æ–°çš„ Updater å¯¹è±¡ï¼Œå¯¹äºå¦‚æœè°ƒç”¨ setState æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ React åº•å±‚è°ƒç”¨ Updater å¯¹è±¡ä¸Šçš„ enqueueSetState æ–¹æ³•ã€‚</p>
<h3 id="ç±»ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç±»ç»„ä»¶" aria-hidden="true">#</a> ç±»ç»„ä»¶</h3>
<p><strong>unstable_batchedUpdates</strong>:å¼‚æ­¥ç¯å¢ƒä¸‹ï¼Œç»§å¼€å¯æ‰¹é‡æ›´æ–°æ¨¡å¼</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>setTimeout(()=>{
    unstable_batchedUpdates(()=>{
        this.setState({ number:this.state.number + 1 })
        console.log(this.state.number)
        this.setState({ number:this.state.number + 1})
        console.log(this.state.number)
        this.setState({ number:this.state.number + 1 })
        console.log(this.state.number)
    })
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>flushSync</strong>:æå‡æ›´æ–°ä¼˜å…ˆçº§</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>handerClick=()=>{
    setTimeout(()=>{
        this.setState({ number: 1  })
    })
    this.setState({ number: 2  })
    ReactDOM.flushSync(()=>{
        this.setState({ number: 3  })
    })
    this.setState({ number: 4  })
}
render(){
   console.log(this.state.number)
   return ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="å‡½æ•°ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°ç»„ä»¶" aria-hidden="true">#</a> å‡½æ•°ç»„ä»¶</h3>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>[ â‘ state , â‘¡dispatch ] = useState(â‘¢initData)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul>
<li>æ³¨æ„ â‘¡ â‘¢ æ˜¯å‡½æ•°çš„æƒ…å†µ</li>
</ul>
<h3 id="qa-1" tabindex="-1"><a class="header-anchor" href="#qa-1" aria-hidden="true">#</a> QA</h3>
<ol>
<li>ä¸ºä»€ä¹ˆå¼‚æ­¥ç¯å¢ƒä¸­æ‰¹é‡æ›´æ–°è§„åˆ™è¢«æ‰“ç ´ï¼Œ setState åèµ° render??????å®å¾®ä»»åŠ¡</li>
<li>useState å‚æ•°å¯ä»¥æ˜¯ä¸ªå‡½æ•°ï¼Œåˆå§‹å€¼æ˜¯å‡½æ•°æ‰§è¡Œåçš„ç»“æœï¼Ÿ</li>
<li>RN æ²¡æœ‰ ReactDOM.flushSync</li>
<li>legacy æ¨¡å¼ï¼Œè¿˜æœ‰ blocking æ¨¡å¼ã€concurrent æ¨¡å¼æ¦‚å¿µ</li>
<li>ï¼ˆå›¾ï¼‰åˆå¹¶ state å’Œè°ƒå’Œæ ‘çš„é¡ºåºæ˜¯å¦åº”è¯¥åè¿‡æ¥</li>
<li>åˆå¹¶ state çš„è¿‡ç¨‹åœ¨å“ªå„¿</li>
<li>ä¸‹åˆ—ç‚¹å‡»äº‹ä»¶çš„æ‰“å°ç»“æœ</li>
<li>å®ä»»åŠ¡å¾®ä»»åŠ¡ï¼Ÿjs ä»»åŠ¡ç³»ç»Ÿ</li>
<li>useState åˆå§‹åŒ–å¯¹è±¡æ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æƒ…å†µï¼Œæ”¹å˜åˆå§‹å¯¹è±¡ï¼ŒuseState çš„å¯¹è±¡ä¼šæ”¹å˜å—</li>
</ol>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>handleClick= () => {
          this.setState({ number:this.state.number + 1 },()=>{   console.log( 'callback1', this.state.number)  })
          console.log(this.state.number)
          this.setState({ number:this.state.number + 2 },()=>{   console.log( 'callback2', this.state.number)  })
          console.log(this.state.number)
          this.setState({ number:this.state.number + 3 },()=>{   console.log( 'callback3', this.state.number)  })
          console.log(this.state.number)
    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>0, 0, 0, callback1 3 ,callback2 3 ,callback3 3
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="è‡ªå®šä¹‰-hooks" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰-hooks" aria-hidden="true">#</a> è‡ªå®šä¹‰ Hooks</h2>
<h3 id="qa-2" tabindex="-1"><a class="header-anchor" href="#qa-2" aria-hidden="true">#</a> QA</h3>
<ul>
<li>æ‰§è¡Œå‰¯ä½œç”¨ã€demo å¥½åƒæœ‰é—®é¢˜ï¼Œæ•²ä¸€ä¸ª</li>
</ul>
<h1 id="éšè®°" tabindex="-1"><a class="header-anchor" href="#éšè®°" aria-hidden="true">#</a> éšè®°</h1>
<ul>
<li>æ‰å¹³åŒ–çš„æ„æ€ï¼Ÿæ ‘å½¢ç»“æ„å¦‚ä½•æ‰å¹³åŒ–</li>
<li>fiber å¯¹è±¡</li>
</ul>
<h1 id="æ·±å…¥-props" tabindex="-1"><a class="header-anchor" href="#æ·±å…¥-props" aria-hidden="true">#</a> æ·±å…¥ props</h1>
<h2 id="props-æ“ä½œæŠ€å·§" tabindex="-1"><a class="header-anchor" href="#props-æ“ä½œæŠ€å·§" aria-hidden="true">#</a> props æ“ä½œæŠ€å·§</h2>
<p>æŠ½è±¡ Props ä¸€èˆ¬ç”¨äº<strong>è·¨å±‚çº§ä¼ é€’ props</strong>ï¼Œä¸€èˆ¬ä¸éœ€è¦å…·ä½“æŒ‡å‡º props ä¸­æŸä¸ªå±æ€§ï¼Œè€Œæ˜¯å°† props ç›´æ¥ä¼ å…¥æˆ–è€…æ˜¯æŠ½ç¦»åˆ°å­ç»„ä»¶ä¸­</p>
<h3 id="æ··å…¥-props" tabindex="-1"><a class="header-anchor" href="#æ··å…¥-props" aria-hidden="true">#</a> æ··å…¥ props</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span> hello<span class="token punctuation">,</span>world <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fatherProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mes</span><span class="token operator">:</span> <span class="token string">"let us learn React !"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Son <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>fatherProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> indexProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"alien"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">"28"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Father <span class="token punctuation">{</span><span class="token operator">...</span>indexProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>æ‰“å°
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/props-to.awebp" alt="">
å°† Index ç»„ä»¶ indexProps æŠ½è±¡ä¼ é€’ç»™ Sonï¼Œä¸€æ–¹é¢æ··å…¥ fatherProps</p>
<h3 id="æŠ½ç¦»-props" tabindex="-1"><a class="header-anchor" href="#æŠ½ç¦»-props" aria-hidden="true">#</a> æŠ½ç¦» props</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span> hello<span class="token punctuation">,</span>world <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>fatherProps <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Son <span class="token punctuation">{</span><span class="token operator">...</span>fatherProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> indexProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"alien"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">"28"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mes</span><span class="token operator">:</span> <span class="token string">"let us learn React !"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Father <span class="token punctuation">{</span><span class="token operator">...</span>indexProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>å°† indexProps ä¸­çš„ age å±æ€§æŠ½ç¦»å‡ºæ¥ã€‚</p>
<h3 id="éšå¼æ³¨å…¥-props" tabindex="-1"><a class="header-anchor" href="#éšå¼æ³¨å…¥-props" aria-hidden="true">#</a> éšå¼æ³¨å…¥ props</h3>
<p>React.cloneElement</p>
<h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h3>
<ul>
<li>å¯¹ props ä¸­ children çš„æ“ä½œï¼Œæ˜¾ç¤ºä¸å¦ã€åˆ¤æ–­ç±»å‹åšè‡ªå·±çš„æ¸²æŸ“é€»è¾‘ç­‰</li>
<li>å¯¹ props ä¸­çš„ children çš„ props æ“ä½œï¼Œæ³¨å…¥æ–°çš„ props ç­‰</li>
</ul>
<p>å®¹å™¨æŠ€å·§ =&gt; è·å– children =&gt; åšè‡ªå®šä¹‰æ“ä½œ</p>
<h3 id="qa-3" tabindex="-1"><a class="header-anchor" href="#qa-3" aria-hidden="true">#</a> QA</h3>
<p>FormItem.displayName ä¸ºä»€ä¹ˆè¿™ä¹ˆå– children.type.displayName</p>
<h1 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸ</h1>
<ul>
<li>æŒ‚è½½
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/lifecycle-mont.awebp" alt=""></li>
</ul>
<p>constructor -&gt; getDerivedStateFromProps / componentWillMount -&gt; render -&gt; componentDidMount</p>
<ul>
<li>æ›´æ–°
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/lifecycle-update.awebp" alt=""></li>
</ul>
<p>componentWillReceiveProps( props æ”¹å˜) / getDerivedStateFromProp -&gt; shouldComponentUpdate -&gt; componentWillUpdate -&gt; render -&gt; getSnapshotBeforeUpdate -&gt; componentDidUpdate</p>
<ul>
<li>
<p>é”€æ¯
commit é˜¶æ®µè°ƒç”¨ componentWillUnmount</p>
</li>
<li>
<p>æ€»è§ˆ
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/lifecycle-all-class.awebp" alt=""></p>
</li>
</ul>
<h2 id="å„é˜¶æ®µè¦ç‚¹" tabindex="-1"><a class="header-anchor" href="#å„é˜¶æ®µè¦ç‚¹" aria-hidden="true">#</a> å„é˜¶æ®µè¦ç‚¹</h2>
<ul>
<li>getDerivedStateFromPropsï¼šåªæ˜¯é™æ€æ–¹æ³•ã€è®¿é—®ä¸åˆ° thisï¼Œç»„ä»¶æ›´æ–°ï¼Œå°±ä¼šæ‰§è¡Œ getDerivedStateFromPropsï¼Œä¸ç®¡æ˜¯ props æ”¹å˜ï¼Œè¿˜æ˜¯ setState ï¼Œæˆ–æ˜¯ forceUpdate ã€‚</li>
<li>getSnapshotBeforeUpdate: è·å– æ›´æ–°å‰ DOM ä¿¡æ¯çš„æœ€ä½³æ—¶æœŸï¼ŒgetSnapshotBeforeUpdate å°†è¿”å›ä¸€ä¸ªå€¼ä½œä¸ºä¸€ä¸ª snapShot(å¿«ç…§)ï¼Œä¼ é€’ç»™ componentDidUpdate ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°</li>
</ul>
<h1 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> context</h1>
<h2 id="consumer-çš„ä¸‰ç§å†™æ³•" tabindex="-1"><a class="header-anchor" href="#consumer-çš„ä¸‰ç§å†™æ³•" aria-hidden="true">#</a> consumer çš„ä¸‰ç§å†™æ³•</h2>
<ul>
<li>useContext</li>
<li>å‡½æ•°å¼</li>
<li>contextType</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç±»ç»„ä»¶ - contextType æ–¹å¼</span>
<span class="token keyword">class</span> <span class="token class-name">ConsumerDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> background <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">,</span> background <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">æ¶ˆè´¹è€…</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ConsumerDemo<span class="token punctuation">.</span>contextType <span class="token operator">=</span> ThemeContext<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConsumerDemo</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="provider-ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#provider-ç‰¹æ€§" aria-hidden="true">#</a> Provider ç‰¹æ€§</h2>
<ol>
<li>Provider ä½œä¸ºæä¾›è€…ä¼ é€’ context ï¼Œprovider ä¸­ value å±æ€§æ”¹å˜ä¼šä½¿æ‰€æœ‰æ¶ˆè´¹ context çš„ç»„ä»¶é‡æ–°æ›´æ–°ã€‚</li>
<li>Provider å¯ä»¥é€å±‚ä¼ é€’ contextï¼Œä¸‹ä¸€å±‚ Provider ä¼šè¦†ç›–ä¸Šä¸€å±‚ Providerã€‚</li>
</ol>
<h2 id="qa-4" tabindex="-1"><a class="header-anchor" href="#qa-4" aria-hidden="true">#</a> QA</h2>
<ul>
<li>contextType åº•å±‚å¦‚ä½•å¤„ç†çš„</li>
</ul>
<h2 id="æ‹“å±•" tabindex="-1"><a class="header-anchor" href="#æ‹“å±•" aria-hidden="true">#</a> æ‹“å±•</h2>
<ul>
<li>æ³¨æ„å…¶ä¸­çš„ä¾‹å­ï¼šProvider value æ”¹å˜ å¯¼è‡´ç»„ä»¶æ ‘é‡æ–°æ¸²æŸ“çš„ä¾‹å­
<blockquote>
<p>æ²¡æœ‰ memo å¤„ç†ï¼ŒuseState ä¼šè®© ProviderDemo é‡æ–° render ï¼Œæ­¤æ—¶ son æ²¡æœ‰å¤„ç†ï¼Œå°±ä¼šè·Ÿéšçˆ¶ç»„ä»¶ render</p>
</blockquote>
</li>
</ul>
<h1 id="é«˜é˜¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶" aria-hidden="true">#</a> é«˜é˜¶ç»„ä»¶</h1>
<p>é«˜é˜¶ç»„ä»¶èƒ½å¤ç”¨å“ªäº›ä»£ç é€»è¾‘ï¼Ÿ</p>
<ul>
<li>æ¸²æŸ“åŠ«æŒï¼šæ‡’åŠ è½½ã€åŠ¨æ€åŠ è½½ã€æ¸²æŸ“ä¸å¦ã€ç»Ÿä¸€ç©ºå±•ç¤ºã€ç»Ÿä¸€å¼‚å¸¸å±•ç¤ºã€æ›¿æ¢èŠ‚ç‚¹ç­‰</li>
<li>æ··å…¥ Props: æ–°å¢ props,ä¼ é€’å·²çŸ¥ props å€¼ï¼Œæ¯”å¦‚é¡¹ç›®ä¸­æƒ³è®©ä¸€ä¸ªé Route ç»„ä»¶ï¼Œä¹Ÿèƒ½é€šè¿‡ props è·å–è·¯ç”±å®ç°è·³è½¬ï¼Œä½†æ˜¯ä¸æƒ³é€šè¿‡çˆ¶çº§è·¯ç”±ç»„ä»¶å±‚å±‚ç»‘å®š props ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ª HOC æŠŠæ”¹å˜è·¯ç”±çš„ history å¯¹è±¡æ··å…¥ props ä¸­ï¼Œäºæ˜¯ withRoute è¯ç”Ÿäº†ã€‚</li>
<li>ç›‘æ§ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼šå¦‚å¯¹ç»„ä»¶å†…çš„ç‚¹å‡»äº‹ä»¶åšä¸€äº›ç›‘æ§ï¼Œæˆ–è€…åŠ ä¸€æ¬¡é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯¹ç°æœ‰ props åšä¸€äº›åŠ å·¥é‡æ–°ä¼ é€’</li>
</ul>
<p>ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶</p>
<ul>
<li>å±æ€§ä»£ç†ï¼šæ— ä¾µå…¥ã€å¤šå±‚åµŒå¥—æ¯”è¾ƒå®‰å…¨ã€ä½è€¦åˆï¼Œæ³¨æ„å¤„ç† Refã€é™æ€å±æ€§</li>
<li>åå‘ç»§æ‰¿ï¼šä¾¿äºç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€å¤„ç† Refã€é™æ€å±æ€§ï¼Œå¤šä¸ªåå‘ç»§æ‰¿ä¼šç›¸äº’è¦†ç›–ï¼Œè€¦åˆè¾ƒé«˜ï¼Œéœ€è¦çŸ¥é“åŸå§‹ç»„ä»¶</li>
</ul>
<h2 id="ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-hidden="true">#</a> ç¤ºä¾‹ä»£ç </h2>
<ol>
<li>å¼ºåŒ– props</li>
</ol>
<p>åŠ å…¥ä¸€äº›å…¶ä»–çš„ props ï¼Œå¼ºåŒ–åŸå§‹ç»„ä»¶åŠŸèƒ½</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// è®©ç»„ä»¶ä¹Ÿå¯ä»¥è·å–åˆ°è·¯ç”±å¯¹è±¡ï¼Œè¿›è¡Œè·¯ç”±è·³è½¬ç­‰æ“ä½œ</span>
<span class="token keyword">function</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> displayName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">withRouter(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Component<span class="token punctuation">.</span>displayName <span class="token operator">||</span> Component<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">/*  è·å– */</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> wrappedComponentRef<span class="token punctuation">,</span> <span class="token operator">...</span>remainingProps <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>RouterContext<span class="token punctuation">.</span>Consumer<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Component
              <span class="token punctuation">{</span><span class="token operator">...</span>remainingProps<span class="token punctuation">}</span> <span class="token comment">// ç»„ä»¶åŸå§‹çš„props</span>
              <span class="token punctuation">{</span><span class="token operator">...</span>context<span class="token punctuation">}</span> <span class="token comment">// å­˜åœ¨è·¯ç”±å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼Œhistory  location ç­‰</span>
              ref<span class="token operator">=</span><span class="token punctuation">{</span>wrappedComponentRef<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>RouterContext<span class="token punctuation">.</span>Consumer<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token constant">C</span><span class="token punctuation">.</span>displayName <span class="token operator">=</span> displayName<span class="token punctuation">;</span>
  <span class="token constant">C</span><span class="token punctuation">.</span>WrappedComponent <span class="token operator">=</span> Component<span class="token punctuation">;</span>
  <span class="token comment">/* ç»§æ‰¿é™æ€å±æ€§ */</span>
  <span class="token keyword">return</span> <span class="token function">hoistStatics</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> withRouter<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>ä¸è¦åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æˆ–ç±»ç»„ä»¶ render å‡½æ•°ä¸­ä½¿ç”¨ HOC</li>
</ol>
<p>æ¯ä¸€æ¬¡ç±»ç»„ä»¶è§¦å‘ render æˆ–è€…å‡½æ•°ç»„ä»¶æ‰§è¡Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ WrapHomeï¼Œreact diff ä¼šåˆ¤å®šä¸¤æ¬¡ä¸æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå¸è½½è€ç»„ä»¶ï¼Œé‡æ–°æŒ‚è½½æ–°ç»„ä»¶ï¼Œé€ æˆæ–°èƒ½æµªè´¹</p>
<ol start="2">
<li>å¤„ç† Ref</li>
<li>å¤„ç†é™æ€å±æ€§</li>
<li>å¤š HOC æ—¶ æ³¨æ„æ˜¯å¦ä¼šç›¸äº’å½±å“</li>
</ol>
<h1 id="æ¸²æŸ“æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“æ§åˆ¶" aria-hidden="true">#</a> æ¸²æŸ“æ§åˆ¶</h1>
<p>useMemo åŸç†ï¼šuseMemo ä¼šè®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œ create çš„è¿”å›å€¼ï¼Œå¹¶æŠŠå®ƒç»‘å®šåœ¨å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber å¯¹è±¡ä¸Šï¼Œåªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œç¼“å­˜å€¼å°±ä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯ deps ä¸­å¦‚æœæœ‰ä¸€é¡¹æ”¹å˜ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œ create ï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„å€¼è®°å½•åˆ° fiber å¯¹è±¡ä¸Š</p>
<p>æ³¨æ„ç»™ç»„ä»¶ props ä¼ ç®­å¤´å‡½æ•°ã€å¯¹è±¡çš„æƒ…å†µï¼Œä¼šä½¿ PureComponent å¤±æ•ˆ</p>
<p>React.memo å½“äºŒä¸ªå‚æ•° compare ä¸å­˜åœ¨æ—¶ï¼Œä¼šç”¨æµ…æ¯”è¾ƒåŸåˆ™å¤„ç† props ï¼Œç›¸å½“äºä»…æ¯”è¾ƒ props ç‰ˆæœ¬çš„ pureComponent</p>
<p>æ‰“ç ´æ¸²æŸ“é™åˆ¶ï¼š</p>
<ol>
<li>
<p>forceUpdateã€‚ç±»ç»„ä»¶æ›´æ–°å¦‚æœè°ƒç”¨çš„æ˜¯ forceUpdate è€Œä¸æ˜¯ setState ï¼Œä¼šè·³è¿‡ PureComponent çš„æµ…æ¯”è¾ƒå’Œ shouldComponentUpdate è‡ªå®šä¹‰æ¯”è¾ƒã€‚å…¶åŸç†æ˜¯ç»„ä»¶ä¸­è°ƒç”¨ forceUpdate æ—¶å€™ï¼Œå…¨å±€ä¼šå¼€å¯ä¸€ä¸ª hasForceUpdate çš„å¼€å…³ã€‚å½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è¿™ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€ï¼Œå°±ç›´æ¥è·³è¿‡ shouldUpdate ã€‚</p>
</li>
<li>
<p>context ç©¿é€ï¼Œä¸Šè¿°çš„å‡ ç§æ–¹å¼ï¼Œéƒ½ä¸èƒ½æœ¬è´¨ä¸Šé˜»æ–­ context æ”¹å˜ï¼Œè€Œå¸¦æ¥çš„æ¸²æŸ“ç©¿é€ï¼Œæ‰€ä»¥å¼€å‘è€…åœ¨ä½¿ç”¨ Context è¦æ ¼å¤–å°å¿ƒï¼Œæ—¢ç„¶é€‰æ‹©äº†æ¶ˆè´¹ context ï¼Œå°±è¦æ‰¿æ‹… context æ”¹å˜ï¼Œå¸¦æ¥çš„æ›´æ–°ä½œç”¨ã€‚</p>
</li>
</ol>
<p>æ¸²æŸ“æµç¨‹å›¾
<img src="@source/image/æŠ€æœ¯æ€»ç»“/React/render-step.awebp" alt=""></p>
<h1 id="äº‹ä»¶åŸç†" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶åŸç†" aria-hidden="true">#</a> äº‹ä»¶åŸç†</h1>
<ul>
<li>é˜»æ­¢å†’æ³¡ï¼šReact ä¸­å¦‚æœæƒ³è¦é˜»æ­¢äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œå¯ä»¥ç”¨ e.stopPropagation()</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ŒhandleFatherClick äº‹ä»¶è®²ä¸åœ¨è§¦å‘ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleFatherClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å†’æ³¡åˆ°çˆ¶çº§"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleFatherClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹å‡»<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="fiber" tabindex="-1"><a class="header-anchor" href="#fiber" aria-hidden="true">#</a> Fiber</h1>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">FiberNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span> <span class="token comment">// fiber æ ‡ç­¾ è¯æ˜æ˜¯ä»€ä¹ˆç±»å‹fiberã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span> <span class="token comment">// keyè°ƒå’Œå­èŠ‚ç‚¹æ—¶å€™ç”¨åˆ°ã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// domå…ƒç´ æ˜¯å¯¹åº”çš„å…ƒç´ ç±»å‹ï¼Œæ¯”å¦‚divï¼Œç»„ä»¶æŒ‡å‘ç»„ä»¶å¯¹åº”çš„ç±»æˆ–è€…å‡½æ•°ã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>stateNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å¯¹åº”çš„çœŸå®domå…ƒç´ ï¼Œç±»ç»„ä»¶æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼Œå¯ä»¥è¢«refè·å–ã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>return <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘çˆ¶çº§fiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å­çº§fiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å…„å¼Ÿfiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// ç´¢å¼•</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// refæŒ‡å‘ï¼Œrefå‡½æ•°ï¼Œæˆ–è€…refå¯¹è±¡ã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>pendingProps <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span> <span class="token comment">// åœ¨ä¸€æ¬¡æ›´æ–°ä¸­ï¼Œä»£è¡¨elementåˆ›å»º</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½•ä¸Šä¸€æ¬¡æ›´æ–°å®Œæ¯•åçš„props</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç±»ç»„ä»¶å­˜æ”¾setStateæ›´æ–°é˜Ÿåˆ—ï¼Œå‡½æ•°ç»„ä»¶å­˜æ”¾</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç±»ç»„ä»¶ä¿å­˜stateä¿¡æ¯ï¼Œå‡½æ•°ç»„ä»¶ä¿å­˜hooksä¿¡æ¯ï¼Œdomå…ƒç´ ä¸ºnull</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// contextæˆ–æ˜¯æ—¶é—´çš„ä¾èµ–é¡¹</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span> <span class="token comment">//æè¿°fiberæ ‘çš„æ¨¡å¼ï¼Œæ¯”å¦‚ ConcurrentMode æ¨¡å¼</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>effectTag <span class="token operator">=</span> NoEffect<span class="token punctuation">;</span> <span class="token comment">// effectæ ‡ç­¾ï¼Œç”¨äºæ”¶é›†effectList</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªeffect</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>firstEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ä¸€ä¸ªeffect</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æœ€åä¸€ä¸ªeffect</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>expirationTime <span class="token operator">=</span> NoWork<span class="token punctuation">;</span> <span class="token comment">// é€šè¿‡ä¸åŒè¿‡æœŸæ—¶é—´ï¼Œåˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¿‡æœŸï¼Œ åœ¨v17ç‰ˆæœ¬ç”¨laneè¡¨ç¤ºã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>alternate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//åŒç¼“å­˜æ ‘ï¼ŒæŒ‡å‘ç¼“å­˜çš„fiberã€‚æ›´æ–°é˜¶æ®µï¼Œä¸¤é¢—æ ‘äº’ç›¸äº¤æ›¿ã€‚</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="render-commit" tabindex="-1"><a class="header-anchor" href="#render-commit" aria-hidden="true">#</a> render &amp; commit</h2>
<h3 id="render" tabindex="-1"><a class="header-anchor" href="#render" aria-hidden="true">#</a> render</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// react-reconciler/src/ReactFiberWorkLoop.js</span>

<span class="token keyword">function</span> <span class="token function">workLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>workInProgress <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workInProgress <span class="token operator">=</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span>workInProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è°ƒå’Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªå‘ç”Ÿæ›´æ–°çš„ fiber éƒ½ä¼šä½œä¸ºä¸€æ¬¡ workInProgress</p>
<p>workLoop å°±æ˜¯æ‰§è¡Œæ¯ä¸€ä¸ªå•å…ƒçš„è°ƒåº¦å™¨ï¼Œå¦‚æœæ¸²æŸ“æ²¡æœ‰è¢«ä¸­æ–­ï¼Œé‚£ä¹ˆ workLoop ä¼šéå†ä¸€é fiber æ ‘</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// react-reconciler/src/ReactFiberWorkLoop.js</span>

<span class="token keyword">function</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  next <span class="token operator">=</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> unitOfWork<span class="token punctuation">,</span> renderExpirationTime<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰ç…§ child æŒ‡é’ˆé€å±‚å‘ä¸‹è°ƒå’Œï¼ŒæœŸé—´ä¼šæ‰§è¡Œå‡½æ•°ç»„ä»¶ï¼Œå®ä¾‹ç±»ç»„ä»¶ï¼Œdiff è°ƒå’Œå­èŠ‚ç‚¹ï¼Œæ‰“ä¸åŒeffectTagã€‚</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    next <span class="token operator">=</span> <span class="token function">completeUnitOfWork</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‘ä¸Šå½’å¹¶çš„è¿‡ç¨‹ï¼Œå¦‚æœæœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œä¼šè¿”å› siblingå…„å¼Ÿï¼Œæ²¡æœ‰è¿”å› return çˆ¶çº§ï¼Œä¸€ç›´è¿”å›åˆ° fiebrRoot ï¼ŒæœŸé—´å¯ä»¥å½¢æˆeffectListï¼Œå¯¹äºåˆå§‹åŒ–æµç¨‹ä¼šåˆ›å»º DOM ï¼Œå¯¹äº DOM å…ƒç´ è¿›è¡Œäº‹ä»¶æ”¶é›†ï¼Œå¤„ç†styleï¼ŒclassNameç­‰ã€‚</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ€»ç»“ beginWork ä½œç”¨å¦‚ä¸‹ï¼š</p>
<p>å¯¹äºç»„ä»¶ï¼Œæ‰§è¡Œéƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œ render ï¼Œå¾—åˆ°æœ€æ–°çš„ children ã€‚
å‘ä¸‹éå†è°ƒå’Œ children ï¼Œå¤ç”¨ oldFiber ( diff ç®—æ³•)ï¼Œdiff æµç¨‹åœ¨ç¬¬åäºŒç« å·²ç»è®²è¿‡äº†ã€‚
æ‰“ä¸åŒçš„å‰¯ä½œç”¨æ ‡ç­¾ effectTag ï¼Œæ¯”å¦‚ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…å…ƒç´ çš„å¢åŠ ï¼Œåˆ é™¤ï¼Œæ›´æ–°ã€‚</p>
<p>completeUnitOfWork çš„æµç¨‹æ˜¯è‡ªä¸‹å‘ä¸Šçš„ï¼Œé‚£ä¹ˆ completeUnitOfWork è¿‡ç¨‹ä¸»è¦åšå†™ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆ completeUnitOfWork ä¼šå°† effectTag çš„ Fiber èŠ‚ç‚¹ä¼šè¢«ä¿å­˜åœ¨ä¸€æ¡è¢«ç§°ä¸º effectList çš„å•å‘é“¾è¡¨ä¸­ã€‚åœ¨ commit é˜¶æ®µï¼Œå°†ä¸å†éœ€è¦éå†æ¯ä¸€ä¸ª fiber ï¼Œåªéœ€è¦æ‰§è¡Œæ›´æ–° effectList å°±å¯ä»¥äº†ã€‚
completeWork é˜¶æ®µå¯¹äºç»„ä»¶å¤„ç† context ï¼›å¯¹äºå…ƒç´ æ ‡ç­¾åˆå§‹åŒ–ï¼Œä¼šåˆ›å»ºçœŸå® DOM ï¼Œå°†å­å­™ DOM èŠ‚ç‚¹æ’å…¥åˆšç”Ÿæˆçš„ DOM èŠ‚ç‚¹ä¸­ï¼›ä¼šè§¦å‘ diffProperties å¤„ç† props ï¼Œæ¯”å¦‚äº‹ä»¶æ”¶é›†ï¼Œstyleï¼ŒclassName å¤„ç†ï¼Œåœ¨ 15 ç« è®²åˆ°è¿‡ã€‚</p>
<h3 id="commit" tabindex="-1"><a class="header-anchor" href="#commit" aria-hidden="true">#</a> commit</h3>
<p>ä¸»è¦åšçš„äº‹å°±æ˜¯æ‰§è¡Œ effectListï¼Œæ›´æ–° DOMï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸï¼Œè·å– ref ç­‰æ“ä½œ</p>
<h3 id="è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾" tabindex="-1"><a class="header-anchor" href="#è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾" aria-hidden="true">#</a> è°ƒå’Œ + å¼‚æ­¥è°ƒåº¦ æµç¨‹æ€»å›¾</h3>
<p><img src="@source/image/æŠ€æœ¯æ€»ç»“/React/fiber-async.awebp" alt=""></p>
<h2 id="question" tabindex="-1"><a class="header-anchor" href="#question" aria-hidden="true">#</a> Question</h2>
<ul>
<li>ä»€ä¹ˆæ˜¯ fiber ï¼Ÿ</li>
<li>Fiber æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li>
<li>Fiber root å’Œ root fiber æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>ä¸åŒ fiber ä¹‹é—´å¦‚ä½•å»ºç«‹èµ·å…³è”çš„ï¼Ÿ</li>
<li>React è°ƒå’Œæµç¨‹ï¼Ÿ</li>
<li>ä¸¤å¤§é˜¶æ®µ commit å’Œ render éƒ½åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯åŒç¼“å†²æ ‘ï¼Ÿ</li>
<li>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</li>
<li>Fiber æ·±åº¦éå†æµç¨‹ï¼Ÿ</li>
<li>Fiber çš„è°ƒå’Œèƒ½ä¸­æ–­å—ï¼Ÿ</li>
<li>å¦‚ä½•ä¸­æ–­ï¼Ÿ</li>
<li>å‡è®¾æŸä¸ª 5 å±‚ Fiber æ•°å·²ç»åˆ›å»ºå®Œæ¯•ï¼Œ3 å±‚å‘ç”Ÿæ›´æ–°æ—¶ï¼Œè°ƒå’Œä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹è°ƒå’Œ</li>
<li>element å’Œ Fiber å¦‚ä½•è”ç³»èµ·æ¥çš„</li>
</ul>
<h1 id="hooks-åŸç†" tabindex="-1"><a class="header-anchor" href="#hooks-åŸç†" aria-hidden="true">#</a> Hooks åŸç†</h1>
<h2 id="questions" tabindex="-1"><a class="header-anchor" href="#questions" aria-hidden="true">#</a> Questions</h2>
<p>â‘  React Hooks ä¸ºä»€ä¹ˆå¿…é¡»åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ‰§è¡Œï¼ŸReact å¦‚ä½•èƒ½å¤Ÿç›‘å¬ React Hooks åœ¨å¤–éƒ¨æ‰§è¡Œå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
â‘¡ React Hooks å¦‚ä½•æŠŠçŠ¶æ€ä¿å­˜èµ·æ¥ï¼Ÿä¿å­˜çš„ä¿¡æ¯å­˜åœ¨äº†å“ªé‡Œï¼Ÿ
â‘¢ React Hooks ä¸ºä»€ä¹ˆä¸èƒ½å†™åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Ÿ
â‘£ useMemo å†…éƒ¨å¼•ç”¨ useRef ä¸ºä»€ä¹ˆä¸éœ€è¦æ·»åŠ ä¾èµ–é¡¹ï¼Œè€Œ useState å°±è¦æ·»åŠ ä¾èµ–é¡¹ã€‚
â‘¤ useEffect æ·»åŠ ä¾èµ–é¡¹ props.a ï¼Œä¸ºä»€ä¹ˆ props.a æ”¹å˜ï¼ŒuseEffect å›è°ƒå‡½æ•° create é‡æ–°æ‰§è¡Œã€‚
â‘¥ React å†…éƒ¨å¦‚ä½•åŒºåˆ« useEffect å’Œ useLayoutEffect ï¼Œæ‰§è¡Œæ—¶æœºæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a> </h2>
<h1 id="éšè®°-1" tabindex="-1"><a class="header-anchor" href="#éšè®°-1" aria-hidden="true">#</a> éšè®°</h1>
<ul>
<li>å¦‚ä½•åˆ†äº«</li>
<li>å…¨å±€å¼‚å¸¸æ•è·+äººå·¥åé¦ˆ</li>
<li>æ¯ç« ä»¥åéœ€è¦çŸ¥é“è¯¥ç« è¦ç‚¹,ç›¸å…³é—®é¢˜é¢è¯•æ—¶å¯èƒ½é—®åˆ°</li>
</ul>
</template>
