<template><h1 id="å§”æ‰˜" tabindex="-1"><a class="header-anchor" href="#å§”æ‰˜" aria-hidden="true">#</a> <a href="https://book.kotlincn.net/text/delegation.html" target="_blank" rel="noopener noreferrer">å§”æ‰˜<ExternalLinkIcon/></a></h1>
<p>éƒ½æ˜¯æ–°çŸ¥è¯†ç‚¹ï¼Œå‚é˜…<a href="https://book.kotlincn.net/text/delegation.html" target="_blank" rel="noopener noreferrer">åŸæ–‡<ExternalLinkIcon/></a></p>
<p>å§”æ‰˜æ¨¡å¼å·²ç»è¯æ˜æ˜¯å®ç°ç»§æ‰¿çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹å¼</p>
<div class="language-kotlin ext-kt line-numbers-mode"><pre v-pre class="language-kotlin"><code><span class="token keyword">interface</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token keyword">val</span> x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token operator">:</span> Base<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token keyword">by</span> b

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>Derived</code> çš„è¶…ç±»å‹åˆ—è¡¨ä¸­çš„ <code>by</code>-å­å¥è¡¨ç¤º <code>b</code> å°†ä¼šåœ¨ <code>Derived</code> ä¸­å†…éƒ¨å­˜å‚¨ï¼Œ å¹¶ä¸”ç¼–è¯‘å™¨å°†ç”Ÿæˆè½¬å‘ç»™ <code>b</code> çš„æ‰€æœ‰ <code>Base</code> çš„æ–¹æ³•ã€‚</p>
<h2 id="è¦†ç›–ç”±å§”æ‰˜å®ç°çš„æ¥å£æˆå‘˜" tabindex="-1"><a class="header-anchor" href="#è¦†ç›–ç”±å§”æ‰˜å®ç°çš„æ¥å£æˆå‘˜" aria-hidden="true">#</a> è¦†ç›–ç”±å§”æ‰˜å®ç°çš„æ¥å£æˆå‘˜</h2>
<p>è¦†ç›–ç¬¦åˆé¢„æœŸï¼šç¼–è¯‘å™¨ä¼šä½¿ç”¨ <code>override</code> è¦†ç›–çš„å®ç°è€Œä¸æ˜¯å§”æ‰˜å¯¹è±¡ä¸­çš„ã€‚å¦‚æœå°† <code>override fun printMessage() { print(&quot;abc&quot;) }</code> æ·»åŠ åˆ° <code>Derived</code>ï¼Œé‚£ä¹ˆå½“è°ƒç”¨ <code>printMessage</code> æ—¶ç¨‹åºä¼šè¾“å‡º abc è€Œä¸æ˜¯ 10ï¼š</p>
<div class="language-kotlin ext-kt line-numbers-mode"><pre v-pre class="language-kotlin"><code><span class="token keyword">interface</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">printMessageLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token keyword">val</span> x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">printMessageLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token operator">:</span> Base<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token keyword">by</span> b <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"abc"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printMessageLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºï¼šabc10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ğŸ“¢ ä½†è¯·æ³¨æ„ï¼Œä»¥è¿™ç§æ–¹å¼é‡å†™çš„æˆå‘˜ä¸ä¼šåœ¨å§”æ‰˜å¯¹è±¡çš„æˆå‘˜ä¸­è°ƒç”¨ ï¼Œå§”æ‰˜å¯¹è±¡çš„æˆå‘˜åªèƒ½è®¿é—®å…¶è‡ªèº«å¯¹æ¥å£æˆå‘˜å®ç°ï¼š</p>
<div class="language-kotlin ext-kt line-numbers-mode"><pre v-pre class="language-kotlin"><code><span class="token keyword">interface</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">val</span> message<span class="token operator">:</span> String
    <span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token keyword">val</span> x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">val</span> message <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"BaseImpl: x = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">x</span></span><span class="token string">"</span></span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token operator">:</span> Base<span class="token punctuation">)</span> <span class="token operator">:</span> Base <span class="token keyword">by</span> b <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ b çš„ `print` å®ç°ä¸­ä¸ä¼šè®¿é—®åˆ°è¿™ä¸ªå±æ€§</span>
    <span class="token keyword">override</span> <span class="token keyword">val</span> message <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Message of Derived"</span></span>
    <span class="token comment">// override fun print() { println(message) } // æ·»åŠ è¿™æ®µè¾“å‡ºï¼šMessage of Derived</span>

<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token function">BaseImpl</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> derived <span class="token operator">=</span> <span class="token function">Derived</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    derived<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>derived<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// BaseImpl: x = 10</span>
<span class="token comment">// Message of Derived</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h1 id="question-list" tabindex="-1"><a class="header-anchor" href="#question-list" aria-hidden="true">#</a> question list</h1>
<ul>
<li>å§”æ‰˜å’Œç»§æ‰¿çš„åŒºåˆ«</li>
</ul>
</template>
