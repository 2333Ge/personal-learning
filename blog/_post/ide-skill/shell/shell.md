---
title: Shell æ¦‚è§ˆ
date: 2022-04-21
category: Shell
tags:
  - Shell
---

<!-- more -->
## å‰è¨€

https://b23.tv/9Xh3oaW

æœ¬æ–‡ä¸»è¦ä»‹ç»æ—¥å¸¸æ“ä½œä¸­ä¸€äº›å®ç”¨æŒ‡ä»¤ï¼Œå¦‚ç”¨ç»ˆç«¯å¿«é€ŸæŸ¥ç›®æ ‡ç›®å½•ä¸‹ä¸­æœ€å¤§çš„å‡ ä¸ªæ–‡ä»¶ã€‚

å› ä¸ºåªæ˜¯æŠ›ç –ï¼Œæ‰€ä»¥æ¯ä¸ªç‚¹éƒ½ä¸ä¸ä¼šå¤ªæ·±å…¥ï¼Œå¦‚æœæœ‰æ„Ÿè§‰å®ç”¨çš„åœ°æ–¹ï¼Œå»ºè®®æ ¹æ®å¤‡æ³¨çš„åºå·ï¼Œåœ¨æ–‡æœ«æŸ¥çœ‹å‚è€ƒæ–‡ç« ã€‚

ps: ä»¥ä¸‹ç¤ºä¾‹å‡åœ¨macç»ˆç«¯ä¸­è¿è¡Œï¼Œå…¶ä»–ç»ˆç«¯ä¸­å¯èƒ½ä¼šç•¥æœ‰åå·®ã€‚

## What is Shell

> Shell æ˜¯æŒ‡ä¸€ç§åº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªç•Œé¢ï¼Œç”¨æˆ·é€šè¿‡è¿™ä¸ªç•Œé¢è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ã€‚[1]

ä¸šç•Œæ‰€è¯´çš„Shellé€šå¸¸æŒ‡Shellè„šæœ¬

## é¦–å…ˆå»ºè®®äº†è§£çš„æŠ€å·§ã€æ¦‚å¿µ

1. å¦‚ä½•å¿«é€ŸæŸ¥è¯¢æŒ‡ä»¤åŠä½¿ç”¨çš„æ–¹æ³•ï¼š

- `man + æŒ‡ä»¤å`ï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­çš„æŒ‡ä»¤å¸®åŠ©ã€é…ç½®æ–‡ä»¶ç­‰ä¿¡æ¯ã€‚å¦‚`man ls`

![](./image/man1.jpg)

- `tldr + æŒ‡ä»¤å`: ç›¸æ¯”`man`æ›´åŠ ç®€å•ï¼Œæä¾›äº†æ›´å¤šçš„ç¤ºä¾‹ï¼Œå®‰è£…åŠè¯¦ç»†ä½¿ç”¨æ–¹å¼è§[å®˜ç½‘é“¾æ¥](https://hub.fastgit.org/tldr-pages/tldr)

![tldr](./image/tldr.svg)

- `ä»»æ„å†…å®¹ + Tab`: è‡ªåŠ¨è¡¥å…¨æŒ‡ä»¤ï¼Œå¦‚è¾“å…¥`find -`ï¼Œå†ç‚¹å‡»Tabé”®ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š

![tab](./image/tab1.jpg)

å¤§éƒ¨åˆ†çš„æŒ‡ä»¤å¯é€šè¿‡ä¸Šè¿°æ–¹å¼åœ¨ç³»ç»Ÿä¸­æŸ¥çœ‹æ›´è¯¦ç»†çš„è¯´æ˜ã€‚

2. ç»ˆç«¯å¿«æ·é”®

ç»ˆç«¯ä¸­æŸäº›å¿«æ·é”®å’ŒVimã€ç¼–è¾‘å™¨å¿«æ·é”®ç›¸åŒï¼Œå¦‚`Ctrl A`ï¼Œæ‰€ä»¥è®°ä½ä¸€äº›å¿«æ·é”®å¯å¤šæå‡å¤šå¤„çš„å¼€å‘ä½“éªŒ
<!-- åŒæ­¥å…¶ä»–æ–‡ç«  -->

```bash
Ctrl L # æ¸…å±ï¼ŒæŠŠæœ«å°¾è¡Œç½®é¡¶ï¼Œå¹¶ä¸æ¸…ç©ºï¼Œç­‰äºç»ˆç«¯è¾“å…¥`clear`
Cmd K  # æ¸…å±ï¼Œæ¸…ç©ºç»ˆç«¯
Ctrl A # å…‰æ ‡ç§»åŠ¨è‡³è¡Œå¼€å§‹
Ctrl E # å…‰æ ‡ç§»è‡³è¡Œæœ«å°¾[8]
Ctrl K # å°†å…‰æ ‡ä»¥åçš„å†…å®¹åˆ é™¤
Ctrl + R # åœ¨å†å²å‘½ä»¤ä¸­æŸ¥æ‰¾[8],æ¯”å¦‚ä¹‹å‰æŸæ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå¯é€šè¿‡æ­¤æ–¹å¼å¿«é€Ÿæ‰¾åˆ°å¯¹åº”å‘½ä»¤é‡æ–°æ‰§è¡Œ
```

1. ä¸€äº›åŸºç¡€æ¦‚å¿µ

- **æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡º**ï¼šä¸€ä¸ªå‘½ä»¤é€šå¸¸ä»ä¸€ä¸ªå«æ ‡å‡†è¾“å…¥çš„åœ°æ–¹è¯»å–è¾“å…¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ°å¥½æ˜¯ä½ çš„ç»ˆç«¯ã€‚åŒæ ·ï¼Œä¸€ä¸ªå‘½ä»¤é€šå¸¸å°†å…¶è¾“å‡ºå†™å…¥åˆ°æ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¹Ÿæ˜¯ä½ çš„ç»ˆç«¯ã€‚[11]
- **è¾“å…¥/è¾“å‡ºé‡å®šå‘**ï¼š[11]
  - `>`: è¾“å‡ºé‡å®šå‘
  - `<`: è¾“å…¥é‡å®šå‘
  - `>>`: ä»¥è¿½åŠ çš„æ–¹å¼è¾“å‡ºé‡å®šå‘
- **ç®¡é“æ“ä½œç¬¦`|`**: å¤„ç†å‰é¢ä¸€ä¸ªæŒ‡ä»¤ä¼ å‡ºçš„æ­£ç¡®è¾“å‡ºä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¼ å…¥ä¸‹ä¸€ä¸ªæŒ‡ä»¤
## å®ç”¨å‘½ä»¤

<!-------------------æ— ç¤ºä¾‹------------------------->
- `history`:æ˜¾ç¤ºå†å²æ‰§è¡Œè¿‡çš„å‘½ä»¤
- `date`: æŸ¥çœ‹å½“å‰æ—¶é—´
- `touch`: è®¾ç½®æ–‡ä»¶çš„ä¿®æ”¹å’Œè®¿é—®æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”æ–‡ä»¶å°†æ–°å»ºä¸€ä¸ªã€‚
- `open`: æ‰“å¼€æ–‡ä»¶ã€ç›®å½•æˆ–åº”ç”¨ç¨‹åºã€‚`open .`: åœ¨"è®¿è¾¾ï¼ˆfinderï¼‰"ä¸­æ‰“å¼€å½“å‰æ–‡ä»¶å¤¹ã€‚
- `curl`: å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨"æ ‡å‡†è¾“å‡º"ï¼ˆstdoutï¼‰ä¸Šã€‚[15]ï¼Œå„ä¸ªé€‰é¡¹å«ä¹‰å¯æŸ¥çœ‹[é˜®ä¸€å³°çš„blog][curl]ï¼Œæ¥å£å‡ºç°é—®é¢˜æ—¶ï¼Œç”¨æ­¤æ–¹æ³•å¤ç°å‡ºé—®é¢˜çš„æ¥å£åœºæ™¯éå¸¸æ–¹ä¾¿ã€‚
- `cp source_file target_file`: æ–‡ä»¶æ‹·è´ã€‚
<!-------------------ç»„åˆç¤ºä¾‹------------------------->
- `cd`: åˆ‡æ¢å½“å‰å·¥ä½œç›®å½•
```bash
$ cd ~  # åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·æ ¹ç›®å½•ï¼Œç­‰äºç›´æ¥è¾“å…¥`cd`
$ cd /  # åˆ‡æ¢åˆ°æ‰€æœ‰ç”¨æˆ·å…±äº«çš„æ ¹ç›®å½•
$ cd -  # å›åˆ°ä¸Šä¸€æ¬¡çš„ç›®å½•
```
- `pwd`: æŸ¥çœ‹ç»ˆç«¯å½“å‰æ‰€åœ¨è·¯å¾„
![cd](./image/cd.jpg)

- `echo`: æ‰“å°å‚æ•°åˆ°æ ‡å‡†è¾“å‡º
- `mv  æºæ–‡ä»¶/æ–‡ä»¶å¤¹  æ–°æ–‡ä»¶/æ–‡ä»¶å¤¹`: ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®
- `ls`:åˆ—å‡ºç›®å½•ä¸‹çš„å†…å®¹ï¼Œ`ls -l`: æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠè¯¦ç»†ä¿¡æ¯
- `cat`: è¿æ¥å’Œæ‰“å°æ–‡ä»¶ï¼Œ`cat  -n æ–‡ä»¶`ï¼šæ‰“å°æ–‡ä»¶å†…å®¹ï¼Œæ˜¾ç¤ºè¡Œå·
- `du`:æŸ¥çœ‹ç£ç›˜å ç”¨ï¼Œ`du -h æ–‡ä»¶å`: ä½¿ç”¨äººç±»æ˜“è¯»çš„å•ä½æ‰“å°æ–‡ä»¶ç£ç›˜å ç”¨ï¼ˆæ³¨æ„å¹¶ä¸ç­‰äºæ–‡ä»¶å¤§å°ï¼‰ã€‚
```bash
$ echo "# Hello World" > hello.md
$ cat hello.md
# Hello World
$ mv -v hello.md hello2.md
hello.md -> hello2.md
$ du -h hello2.md
4.0K	hello2.md
$ ls -l
total 8
-rw-r--r--  1 ych  staff  14  5  7 11:42 hello2.md
```
<!-------------------å•ä¸ªç¤ºä¾‹------------------------->

- `xargs`:å°†æ ‡å‡†è¾“å…¥è½¬ä¸ºå‘½ä»¤è¡Œå‚æ•°ã€‚ä¸€äº›å‘½ä»¤ä¸æ”¯æŒæ ‡å‡†è¾“å…¥ï¼Œåªèƒ½ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥å‚æ•°ï¼Œå¯¼è‡´æ— æ³•å¯¼è‡´æ— æ³•ç”¨ç®¡é“å‘½ä»¤ä¼ é€’å‚æ•°[10]ï¼Œæ­¤æ—¶å¯ç”¨`xargs`å¦‚ï¼š
```bash
$ echo "hello world" | echo
# æ— è¾“å‡º
$ echo "hello world" | xargs echo
hello world
```
æ›´è¯¦ç»†çš„ç”¨æ³•å¯å‚è€ƒ[é˜®ä¸€å³°å¤§ä½¬çš„åšå®¢](https://www.ruanyifeng.com/blog/2019/08/xargs-tutorial.html)

- `mkdir path/directory`: åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼Œ`path`ä¸å­˜åœ¨æˆ–`directory`å­˜åœ¨ä¼šæŠ›å‡ºé”™è¯¯ï¼Œ`mkdir -p path/directory`:é€’å½’çš„åˆ›å»ºä¸€ä¸ªæŸä¸ªç›®å½•ï¼Œç›®å½•å­˜åœ¨åˆ™è·³è¿‡ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- `shellcheck yourscript`: æ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œ[shellcheckå·¥å…·å®‰è£…](https://github.com/koalaman/shellcheck#from-your-terminal)
![](./image/shellcheck.png)

- `wc`: è®¡æ•°è¡Œæ•°ã€è¯æ•°ï¼ˆæ¢è¡Œç¬¦ã€ç©ºæ ¼ç¬¦åˆ†å‰²ï¼‰ã€å­—èŠ‚æ•°ã€‚
 
```bash
wc [-clmw] [file ...]
-l  # è¡Œæ•°
-c  # å­—èŠ‚æ•°
-w  # è¯æ•°
```
å¦‚ï¼šç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ–‡ä»¶æ•°
```bash
$ find . -type f | wc -l
42
```
<!-- my question -->
ä¸ºä»€ä¹ˆæ˜¯4
```
$ echo aaa | wc -c
4
```
- `who`:æ˜¾ç¤ºç™»é™†è€…å’Œç›¸å…³æ•°æ®ï¼ˆè¿›ç¨‹ä¿¡æ¯ï¼Œå¯åŠ¨æ—¶é—´ï¼‰
```bash
# æ˜¾ç¤ºå½“å‰ç»ˆç«¯ä¼šè¯ä¿¡æ¯
$ who am i
ych      ttys002  May  6 18:10
# æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ä¿¡æ¯ï¼Œå¹¶å±•ç¤ºè¡¨å¤´
$ who -a -H
USER     LINE     WHEN         IDLE  	   PID	COMMENT
reboot   ~        May  4 17:41   .   	     1
ych      console  May  4 17:42  old  	   153
ych      ttys002  May  6 18:10   .   	 55852
...
```

- `head`: è¾“å‡ºæ–‡ä»¶çš„å¤´éƒ¨ä¿¡æ¯
```bash
# è¾“å‡ºæ–‡ä»¶çš„å‰å‡ è¡Œï¼š
$ head -n è¡Œæ•° æ–‡ä»¶å
# è¾“å‡ºæ–‡ä»¶çš„å‰å‡ ä¸ªå­—èŠ‚ï¼š
$ head -c å­—èŠ‚æ•° æ–‡ä»¶å
```

- `tail`: è¾“å‡ºæ–‡ä»¶çš„æœ«å°¾ä¿¡æ¯
```bash
# è¾“å‡ºæ–‡ä»¶çš„æœ«å°¾å‡ è¡Œï¼š
$  tail -n count path/to/file
# è¾“å‡ºå¼€å§‹è‡³æœ«å°¾countè¡Œ
tail -n +count path/to/file
# è¾“å‡ºæ–‡ä»¶çš„æœ«å°¾å‡ ä¸ªå­—èŠ‚ï¼š
$ tail -c count path/to/file
```

- `diff`: æ¯”è¾ƒæ–‡ä»¶å’Œç›®å½•

<!-------------------æš‚æ— ç¤ºä¾‹------------------------->

<!-------------------è¯¦ç»†ç¤ºä¾‹------------------------->
- `find`:æ–‡ä»¶æŸ¥æ‰¾ï¼Œ`find è·¯å¾„ -name å…³é”®å­—`ï¼šåœ¨æŒ‡å®šè·¯å¾„ä¸‹ä»¥æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶
- `which  å‘½ä»¤å`: æŸ¥çœ‹æŸä¸ªå‘½ä»¤æ˜¯å¦å­˜åœ¨ä»¥åŠæ‰§è¡Œçš„ä½ç½®
```bash
$ which npm
/Users/ych/.nvm/versions/node/v12.18.0/bin/npm
```
### `grep`

- `grep pattern æ–‡ä»¶`ï¼šåœ¨ç»™å®šçš„æ–‡ä»¶ä¸­ï¼ŒæŒ‰è¡ŒåŒ¹é…`pattern`çš„å†…å®¹ï¼Œæ‰“å°è¯¥è¡Œã€‚

```bash
-i  # å¿½ç•¥æœç´¢å­—ç¬¦ä¸²çš„å¤§å°å†™
-v  # å–åï¼Œè¾“å‡ºä¸åŒ¹é…patternçš„é‚£äº›æ–‡æœ¬è¡Œ
-n  # è¾“å‡ºè¡Œå·
-l  # è¾“å‡ºèƒ½åŒ¹é…patternçš„æ–‡ä»¶å
-c  # è¾“å‡ºåŒ¹é…æˆåŠŸçš„è¡Œæ•°
--exclude  # æ’é™¤éœ€è¦æœç´¢çš„æ–‡ä»¶
--exclude-dir # æ’é™¤éœ€è¦æœç´¢çš„ç›®å½•
--include  # æŒ‡å®šéœ€è¦æœç´¢çš„æ–‡ä»¶
```

ç¤ºä¾‹ï¼šæ‰“å°test.mdä¸­ä»¥#å¼€å¤´çš„è¡ŒåŠè¡Œå·
```bash
grep -n "^#" test.md 
```
### `find`[9]

`find`:æ–‡ä»¶æŸ¥æ‰¾

**æ“ä½œç¬¦**

- `-and`ã€`-a`: ä¸ï¼Œä¸€è¡Œä¸­çš„ä¸¤ä¸ªè¯­å¥éšå«ç”¨`-a`è¿æ¥ï¼Œç¬¬ä¸€ä¸ªè¯­å¥ä¸ºfalseåˆ™åé¢ä¸å†æ‰§è¡Œã€‚
- `-or`ã€`-o`: æˆ–
- `-not`ã€`!`: é

```bash
expr1 -and expr2
# ç­‰äº
expr1 -a expr2
# ç­‰äº
expr1 expr2
```
**findå¸¸ç”¨å‚æ•°**

æŸäº›æƒ…å†µå¯ä»¥æŒ‡å®šæ•°å­—ç±»å‹çš„å‚æ•°`n`ä¸ºä»¥ä¸‹å½¢å¼ï¼š

- `+n` è¶…è¿‡n
- `-n` å°‘äºn
- `n`  ç­‰äºn

```bash
# ä»¥ä¸‹å‚æ•°ä¸­çš„ nå‡å¯ä»¥è¢« +nã€-næ›¿æ¢
-amin n # æœ€åä¸€æ¬¡è®¿é—®æ–‡ä»¶çš„æ—¶é—´å¤§äºã€ç­‰äºã€å°äºnåˆ†é’Ÿ
-size n[cwbkMG] # æ–‡ä»¶ä½¿ç”¨ç©ºé—´å¤§äºã€ç­‰äºã€å°äºn(cwbkMG)
	b # 512 å­—èŠ‚
	c # å­—èŠ‚
	w # åŒå­—èŠ‚
	k # kb
	M # mb
	G # gb
-type # æŸ¥æ‰¾æŸä¸€ç±»å‹çš„æ–‡ä»¶ï¼Œè¯¸å¦‚ï¼š
  b # å—è®¾å¤‡æ–‡ä»¶ã€‚
  d # ç›®å½•ã€‚
  c # å­—ç¬¦è®¾å¤‡æ–‡ä»¶ã€‚
  p # ç®¡é“æ–‡ä»¶ã€‚
  l # ç¬¦å·é“¾æ¥æ–‡ä»¶ã€‚
  f # æ™®é€šæ–‡ä»¶
-name pattern # åŸºäºæ–‡ä»¶åæŸ¥æ‰¾ï¼Œå¯ä½¿ç”¨æ­£åˆ™
-maxdepth levels # åœ¨èµ·ç‚¹ä»¥ä¸‹æœ€å¤šlevelså±‚ç›®å½•ä¸‹æŸ¥æ‰¾
```

**ç¤ºä¾‹**

1. æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹é™¤äº†node_modulesç›®å½•ä¸­çš„æ‰€æœ‰mdæ–‡ä»¶

```bash
find . -name "*.md" -a ! -path "./node_modules/*"
```

2. æ˜¾ç¤ºnode_modulesä¸­æ‰€æœ‰å¤§äº1MBçš„æ–‡ä»¶

```bash
$ find node_modules ! -type d -size +1M | xargs du -h
 21M	node_modules/@sentry/cli/sentry-cli
1.7M	node_modules/react-native/node_modules/hermes-engine/osx-bin/hermesc
2.9M	node_modules/react-native/node_modules/hermes-engine/linux64-bin/hermesc
...
```

### `cut`

`cut`: ä»æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶ä¸­å‰ªåˆ‡å­—æ®µï¼Œæ¯åˆ—åºå·ä»1å¼€å§‹

**é€‰é¡¹**

```bash
cut -b list [-n] [file ...]
cut -c list [file ...]
cut -f list [-d delim] [-s] [file ...]

-b list  # listæŒ‡å®šå­—èŠ‚ä½ç½®
-c list  # listæŒ‡å®šå­—ç¬¦ä½ç½®
-d delim  # ç”¨delimåšå­—æ®µåˆ†éš”ç¬¦
-f list  # é…åˆ-dï¼ŒæŒ‡å®šå“ªä¸€æ®µç”¨å­—æ®µåˆ†éš”ç¬¦åˆ†å‰²çš„å­—æ®µï¼Œè¾“å‡ºç”±ä¸€ä¸ªåˆ†å‰²ç¬¦åˆ†å‰²
```

**ç¤ºä¾‹**

1. ä¸Šä¾‹ã€Œæ˜¾ç¤ºnode_modulesä¸­æ‰€æœ‰å¤§äº1MBçš„æ–‡ä»¶ã€å¤ªé•¿äº†ï¼Œåˆ‡æ‰é‡å¤çš„éƒ¨åˆ†

```bash
$ find node_modules ! -type d -size +1M | cut -c 14-
prettier/esm/parser-flow.mjs
prettier/esm/parser-typescript.mjs
prettier/parser-flow.js
prettier/parser-typescript.js
prettier/index.js
leancloud-storage/dist/av-weapp-min.js.map
...
```

2. å¤„ç†ä¸€ä¸‹`who`çš„æ•°æ®ï¼Œåªæ‰“å°å·²å¼€å¯çš„ç»ˆç«¯ååŠå¯åŠ¨æ—¶é—´

```
$ who -H                                 
USER     LINE     WHEN         
ych      console  May  4 17:42 
ych      ttys002  May  6 18:10 
ych      ttys003  May  6 18:10 
ych      ttys005  May  5 10:33 
ych      ttys006  May  5 10:36 
ych      ttys008  May  7 18:51

$ who -H | tr -s " " | cut -d " " -f 2,3-
LINE WHEN 
console May 4 17:42 
ttys002 May 6 18:10 
ttys003 May 6 18:10 
ttys005 May 5 10:33 
ttys006 May 5 10:36 
ttys008 May 7 18:51 
```

### `which`

`which`: åœ¨ PATH å˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­æœç´¢æŸä¸ªç³»ç»Ÿå‘½ä»¤çš„ä½ç½®å¹¶ä¸”è¿”å›ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ which å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°æŸä¸ªç³»ç»Ÿå‘½ä»¤æ˜¯å¦å­˜åœ¨ä»¥åŠæ‰§è¡Œçš„åˆ°åº•æ˜¯å“ªä¸€ä¸ªä½ç½®çš„å‘½ä»¤ã€‚[2]

```bash
$ which date
/bin/date

$ which npm
/Users/ych/.nvm/versions/node/v12.18.0/bin/npm

$ which which
which: shell built-in command # å†…ç½®å‘½ä»¤
```

### `mv`

`mv`:ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®ã€‚

`mv` é€‰é¡¹ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°è¾“å…¥ `mv -` + `Tab`é”®è‡ªåŠ¨è¡¥å…¨ï¼ŒæŸ¥çœ‹å¯é€‰é¡¹

```bash
# -f  -- è¦†ç›–å‰ä¸æç¤º
# -i  -- è¦†ç›–å‰æç¤º
# -n  -- ä¸è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶
# -v  -- ç§»åŠ¨æ–‡ä»¶åæ˜¾ç¤ºæ–‡ä»¶å
$ mv -v mv.md mv2.md
mv.md -> mv2.md
```

### `tr`

`tr`: å°†æ ‡å‡†è¾“å…¥å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡ºï¼Œå¹¶æ›¿æ¢æˆ–åˆ é™¤æ‰€é€‰å­—ç¬¦ã€‚

**é€‰é¡¹**

```bash
tr [-Ccsu] string1 string2
-s string1 # å‹ç¼©è¾“å…¥ä¸­é‡å¤çš„string1

# string1 string2å¯ä»¥æ˜¯å¦‚ä¸‹å½¢å¼
a-zã€1-9 # è¡¨ç¤ºèŒƒå›´a-zã€1-9
[c*n] # cä»£è¡¨çš„å­—ç¬¦é‡å¤næ¬¡ï¼Œä»…åœ¨æœ‰string2æ—¶æœ‰æ•ˆ
[:class:] # classå¯ä¸º
    # alnum        å­—æ¯ã€æ•°å­—å­—ç¬¦
    # alpha        å­—æ¯å­—ç¬¦
    # blank        ç©ºç™½ç¬¦
    # cntrl        æ§åˆ¶å­—ç¬¦
    # digit        æ•°å­—å­—ç¬¦
    # graph        å›¾å½¢å­—ç¬¦
    # lower        å°å†™å­—ç¬¦
    # phonogram    éŸ³æ ‡å­—ç¬¦
    # print        å¯æ‰“å°å­—ç¬¦
    # punct        æ ‡ç‚¹ç¬¦å·
    # rune         æœ‰æ•ˆå­—ç¬¦
    # space        ç©ºæ ¼å­—ç¬¦
    # special      ç‰¹æ®Šå­—ç¬¦
    # upper        å¤§å†™å­—ç¬¦
    # xdigit       åå…­è¿›åˆ¶å­—ç¬¦
```

**ç¤ºä¾‹**

1. æ‰“å°test.txtå†…å®¹ï¼Œå°†æ¢è¡Œç¬¦å·æ›¿æ¢æˆç©ºæ ¼
```bash
$ cat test.txt | tr -s "\n" " "
```
2. æ‰“å°PATHï¼Œæ¢è¡Œä½¿æ›´æ˜“è¯»

```bash
$ echo $PATH
/Users/ych/.nvm/versions/node/v12.18.0/bin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin...
$ echo $PATH | tr ':' '\n'
/Users/ych/.nvm/versions/node/v12.18.0/bin
/usr/local/bin
/usr/local/sbin
...
```
3. å°å†™å­—æ¯è½¬å¤§å†™

```bash
$ echo hello | tr '[:lower:]' '[:upper:]'
HELLO
```

<!-- my question: å¦‚ä½•åšä»»æ„å­—ç¬¦ä¸²æ›¿æ¢ -->
ğŸ“¢ æ³¨æ„ï¼štråªè¿›è¡Œå­—ç¬¦ä¸€å¯¹ä¸€æ›¿æ¢ï¼Œå­—ç¬¦é•¿åº¦ä¸ç­‰çš„æƒ…å†µç”¨trå¯èƒ½ä¸ç¬¦å’Œé¢„æœŸï¼Œå¦‚ä¸‹ï¼Œheå¹¶æ²¡æœ‰æ›¿æ¢ä¸ºABCD
```bash
$ cat hello2.md
# hello world
$ tr 'he' 'ABCD' < hello2.md
# ABllo world
```

### `awk`

`awk`: ä¸€ç§å¤„ç†æ–‡ä»¶çš„é€šç”¨ç¼–ç¨‹è¯­è¨€ã€‚

## é€šé…ç¬¦[5]

- `*`: åŒ¹é…0æˆ–ä»»æ„ä¸ªå­—ç¬¦
- `?`: åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦
- `[-]`: åŒ¹é…ä¸­æ‹¬å·çš„å­—ç¬¦ã€‚ä¾‹å¦‚[a-b]ï¼ŒåŒ¹é…å°å†™å­—æ¯ï¼Œåªä¼šåŒ¹é…é›†åˆä¸­çš„ä¸€ä¸ª
- `[^]`: åŒ¹é…é™¤äº†ä¸­æ‹¬å·çš„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚[^0-9]ï¼ŒåŒ¹é…é™¤äº†æ•°å­—çš„å­—ç¬¦ï¼Œåªä¼šåŒ¹é…é›†åˆä¸­çš„ä¸€ä¸ª
- `{ab,ba}`: åŒ¹é…å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚åŒ¹é…abæˆ–ba

```bash
# æ‰“å°æ‰€æœ‰ä»¥.shç»“å°¾çš„æ–‡ä»¶
ls *.sh

# æ‰“å°æ‰€æœ‰ä»¥.mdã€.txtç»“å°¾çš„æ–‡ä»¶
ls *.{md,txt}

# åˆ›å»ºæ–‡ä»¶ï¼štouch1.mdã€touch4.mdã€touch3.mdã€touch5.md
touch touch{1,3,4,5}.md

touch  {f1,f2}/{a..e}.md # ç­‰äº touch f1/a.mdã€f1/b.mdã€f1/c.mdã€f1/d.mdã€f1/e.mdã€f2/a.mdã€f2/b.mdã€f2/c.mdã€f2/d.mdã€f2/e.mdã€
```

## å˜é‡

- `$?`: ä»ä¸Šä¸€ä¸ªå‘½ä»¤ä¸­è·å–é”™è¯¯ä»£ç 
- `$_`: è·å–ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°
- `$@`: è·å–æ‰€æœ‰å‚æ•°


## å‘½ä»¤åˆ†éš”ç¬¦

- `&&`: ...
- `||`: ...
- `;`: `true ; echo hello`: éƒ½æ‰§è¡Œ

## ç¤ºä¾‹


2. æ˜¾ç¤ºæœ¬æœºIP

```bash
$ ifconfig en0 | grep inet --color=auto
	inet6 ...
	inet 10.6.... netmask 0xfffff800 broadcast 10.6....
# ç­‰äº
$ grep inet <(ifconfig en0) --color=auto
	inet6 ...
	inet 10.6.... netmask 0xfffff800 broadcast 10.6....
```

> en0: Ethernet 0ï¼Œä»¥å¤ªç½‘æ¥å£ 0ï¼Œå¤§å¤šæ•°æƒ…å†µen0æ˜¯ä½ çš„WIFI[6]

3. åˆ é™¤æœ¬åœ°æµ‹è¯•åˆ†æ”¯

åœ¨å¼€å‘çš„æ—¶å€™å»ºç«‹å¾ˆå¤šæµ‹è¯•åˆ†æ”¯

```bash
$ git branch | grep "test-*" | xargs git branch -D
```

4. `>` + `echo`

```bash
$ echo hello > hello.txt
$ cat hello.txt
hello
# ç­‰äº
$ cat < hello.txt
hello
```
## æ³¨æ„äº‹é¡¹

### è¾“å…¥å­—ç¬¦ä¸²æ—¶æ³¨æ„äº‹é¡¹

å¦‚å¸Œæœ›åˆ›å»ºä¸€ä¸ªåå«`hello world`çš„æ–‡ä»¶å¤¹,ä¸èƒ½
```bash
mkdir hello world
```
è¿™æ ·ä¼šåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼ŒHelloå’Œworld

éœ€è¦åŠ è½¬ä¹‰ç¬¦å·æˆ–å¼•å·
```bash
mkdir hello\ world
# æˆ–
mkdir "hello world"
```
å…¶ä»–ç”¨åˆ°å­—ç¬¦çš„æƒ…å†µåŒç†

## å‚è€ƒæ–‡ç« 
 
[1] [èœé¸Ÿæ•™ç¨‹-shell][linux-shell]  
[2] [which](https://www.cnblogs.com/MineGi/p/12631661.html)  
[3] [shell ç®¡é“å‘½ä»¤](https://blog.csdn.net/olizxq/article/details/81263867)  
[4] [ç»ˆç«¯ä¸»é¢˜é…ç½®](https://sspai.com/post/53008)  
<!-- é…ç½®å¤±è´¥ï¼Ÿï¼Ÿ -->
[5] [Shellä¸­çš„é€šé…ç¬¦](https://blog.csdn.net/u010467184/article/details/106117449)    
[6] [ifconfig ä¸­çš„ en0ã€en1ã€p2pæ˜¯ä»€ä¹ˆ](https://stackoverflow.com/questions/29958143/what-are-en0-en1-p2p-and-so-on-that-are-displayed-after-executing-ifconfig)  
[7] [shellcheck github](https://github.com/koalaman/shellcheck#from-your-terminal)  
[8] [å¸¸ç”¨çš„ç»ˆç«¯å¿«æ·é”®](https://blog.csdn.net/teng_liang/article/details/108165687)  
[9] [man find](https://manned.org/find)  
[10] [é˜®ä¸€å³°çš„blog: xargs å‘½ä»¤æ•™ç¨‹](https://www.ruanyifeng.com/blog/2019/08/xargs-tutorial.html)  
[11] [èœé¸Ÿæ•™ç¨‹ï¼šShell è¾“å…¥/è¾“å‡ºé‡å®šå‘](https://www.runoob.com/linux/linux-shell-io-redirections.html)  
[12] [mkdir](https://www.gnu.org/software/coreutils/manual/html_node/mkdir-invocation.html#mkdir-invocation)
[13] [trçš„ç”¨æ³•è®²è§£](https://blog.csdn.net/qq_26502245/article/details/108510149)
[14] [shell ä¸­grepå‘½ä»¤åŠå¸¸ç”¨è¯­æ³•](https://blog.csdn.net/wyqwilliam/article/details/83831947)
[15] [é˜®ä¸€å³°çš„blog: curl çš„ç”¨æ³•æŒ‡å—][curl]
[16] [shellä¹‹cutè¯¦è§£][https://www.cnblogs.com/zmc60/p/15179793.html]


[linux-shell]:https://www.runoob.com/linux/linux-shell.html
[curl]:https://www.ruanyifeng.com/blog/2019/09/curl-reference.html

## éšè®°

- è¾“å…¥`pwd`ã€`date`åç³»ç»Ÿåšäº†ä»€ä¹ˆ
- echo `$PATH`, `$`åŠ åé¢çš„å˜é‡ï¼Œè¡¨ç¤ºä»€ä¹ˆä¿¡æ¯?ç³»ç»Ÿå˜é‡ï¼Ÿä»ä»€ä¹ˆåœ°æ–¹è¯»å–çš„
- å¾…å­¦ä¹ çš„æŒ‡ä»¤ï¼šsortã€sourceã€diffã€convertã€patchã€ifconfigã€awkã€expr
- æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡º
<!-- ä»€ä¹ˆæ˜¯shell -->

<!-- curl æŠ¥é”™ï¼šè¯ä¹¦ï¼Ÿssl?
curl: (60) SSL certificate problem: unable to get local issuer certificate -->