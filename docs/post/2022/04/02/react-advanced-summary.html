<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <title>ã€ŠReactè¿›é˜¶æŒ‡å—ã€‹ç¬”è®° | 2333Ge</title>
    <link rel="shortcut icon" href="/logo.jpg"/>
    <meta name="generator" content="VuePress 1.9.7"/>
    
    <meta name="description" content="ä¸€ä¸ª95åç¨‹åºçŒ¿çš„å­¦ä¹ å°ç«™">
    
    <link rel="preload" href="/docs/assets/css/0.styles.7e878f7b.css" as="style"><link rel="preload" href="/docs/assets/js/app.90fe924d.js" as="script"><link rel="preload" href="/docs/assets/js/4.2437bced.js" as="script"><link rel="preload" href="/docs/assets/js/12.f6f8b844.js" as="script"><link rel="preload" href="/docs/assets/js/6.b41b8e83.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.f141d789.js"><link rel="prefetch" href="/docs/assets/js/11.3b8dd561.js"><link rel="prefetch" href="/docs/assets/js/13.ce5c32bf.js"><link rel="prefetch" href="/docs/assets/js/14.27b64ded.js"><link rel="prefetch" href="/docs/assets/js/15.16b5b255.js"><link rel="prefetch" href="/docs/assets/js/16.e53483ab.js"><link rel="prefetch" href="/docs/assets/js/17.3a59b2eb.js"><link rel="prefetch" href="/docs/assets/js/18.da250b71.js"><link rel="prefetch" href="/docs/assets/js/19.aca309b2.js"><link rel="prefetch" href="/docs/assets/js/20.17dd5352.js"><link rel="prefetch" href="/docs/assets/js/21.b2688e48.js"><link rel="prefetch" href="/docs/assets/js/22.7ab37c33.js"><link rel="prefetch" href="/docs/assets/js/23.504fd4ac.js"><link rel="prefetch" href="/docs/assets/js/24.38be6b09.js"><link rel="prefetch" href="/docs/assets/js/25.d0a07e8c.js"><link rel="prefetch" href="/docs/assets/js/26.a5354581.js"><link rel="prefetch" href="/docs/assets/js/27.924641e4.js"><link rel="prefetch" href="/docs/assets/js/28.27390168.js"><link rel="prefetch" href="/docs/assets/js/29.4697b4c0.js"><link rel="prefetch" href="/docs/assets/js/30.cf22cd58.js"><link rel="prefetch" href="/docs/assets/js/31.a78592d9.js"><link rel="prefetch" href="/docs/assets/js/32.dc14ff68.js"><link rel="prefetch" href="/docs/assets/js/33.8b5e7857.js"><link rel="prefetch" href="/docs/assets/js/34.e0b2dcc5.js"><link rel="prefetch" href="/docs/assets/js/35.5839ecc7.js"><link rel="prefetch" href="/docs/assets/js/36.1fdf5604.js"><link rel="prefetch" href="/docs/assets/js/37.3b220328.js"><link rel="prefetch" href="/docs/assets/js/38.66788129.js"><link rel="prefetch" href="/docs/assets/js/39.933c024e.js"><link rel="prefetch" href="/docs/assets/js/40.f5e0ea38.js"><link rel="prefetch" href="/docs/assets/js/41.b010eed6.js"><link rel="prefetch" href="/docs/assets/js/42.3a3c2310.js"><link rel="prefetch" href="/docs/assets/js/43.7db302a1.js"><link rel="prefetch" href="/docs/assets/js/44.97826806.js"><link rel="prefetch" href="/docs/assets/js/45.264c1125.js"><link rel="prefetch" href="/docs/assets/js/46.c0fc0ad0.js"><link rel="prefetch" href="/docs/assets/js/47.0c3428ca.js"><link rel="prefetch" href="/docs/assets/js/48.e0fad1ac.js"><link rel="prefetch" href="/docs/assets/js/49.9628939b.js"><link rel="prefetch" href="/docs/assets/js/5.6309798a.js"><link rel="prefetch" href="/docs/assets/js/50.af2d54f6.js"><link rel="prefetch" href="/docs/assets/js/51.f4d65a93.js"><link rel="prefetch" href="/docs/assets/js/52.73373cf1.js"><link rel="prefetch" href="/docs/assets/js/53.06a8ed65.js"><link rel="prefetch" href="/docs/assets/js/54.743acf25.js"><link rel="prefetch" href="/docs/assets/js/55.92d1347d.js"><link rel="prefetch" href="/docs/assets/js/56.84e19f1f.js"><link rel="prefetch" href="/docs/assets/js/57.56206fc3.js"><link rel="prefetch" href="/docs/assets/js/7.5627ef7d.js"><link rel="prefetch" href="/docs/assets/js/8.b7166236.js"><link rel="prefetch" href="/docs/assets/js/9.0731487e.js"><link rel="prefetch" href="/docs/assets/js/vendors~flowchart.b9a9f3ba.js"><link rel="prefetch" href="/docs/assets/js/vuejs-paginate.2864cecd.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.7e878f7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="theme-sidebar"><div class="theme-sidebar__inner"><div class="theme-header"><a href="/docs/" class="theme-header__logo router-link-active"><img draggable="false" src="./logo.jpg" alt="logo" width="160" height="160" class="theme-header__picture"> <div class="theme-palette"><span class="theme-palette__emoji"><svg class="theme-icon theme-icon-palette"><use xlink:href="#theme-icon-palette"></use></svg></span> <div class="theme-palette__list"><a href="javascript:;" title="#673ab7" style="color:#673ab7;"></a><a href="javascript:;" title="#3f51b5" style="color:#3f51b5;"></a><a href="javascript:;" title="#2196f3" style="color:#2196f3;"></a><a href="javascript:;" title="#009688" style="color:#009688;"></a><a href="javascript:;" title="#4caf50" style="color:#4caf50;"></a><a href="javascript:;" title="#ff9800" style="color:#ff9800;"></a><a href="javascript:;" title="#ff5722" style="color:#ff5722;"></a><a href="javascript:;" title="#795548" style="color:#795548;"></a><a href="javascript:;" title="#607D8B" style="color:#607D8B;"></a><a href="javascript:;" title="#2a2b33" style="color:#2a2b33;"></a></div></div></a> <a href="/docs/" class="theme-header__name router-link-active">
        2333Ge
      </a> <p class="theme-header__slogan">ä¸€ä¸ª95åç¨‹åºçŒ¿çš„å­¦ä¹ å°ç«™</p></div> <div class="theme-SubNav"><a href="/docs/archives/" class="theme-SubNav__item"><span class="theme-SubNav__count">47</span> <span class="theme-SubNav__name">Archives</span></a> <a href="/docs/categories/" class="theme-SubNav__item"><span class="theme-SubNav__count">19</span> <span class="theme-SubNav__name">Categories</span></a> <a href="/docs/tags/" class="theme-SubNav__item"><span class="theme-SubNav__count">25</span> <span class="theme-SubNav__name">Tags</span></a></div> <div class="theme-nav"><div class="search-box mt-7"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  ğŸ  ä¸»é¡µ
</a></div> <!----></nav></div> <div class="theme-footer"><div class="social-links"><a target="_blank" rel="external nofollow noopener" title="email" href="mailto:ych.class@qq.com" class="icon-email">email</a><a target="_blank" rel="external nofollow noopener" title="github" href="https://github.com/2333Ge" class="icon-github">github</a></div> <p class="copyright"></p> <p class="powered"><span>Powered by <a href="https://vuepress.vuejs.org" target="_blank" rel="external nofollow noopener">VuePress</a></span> <span class="Ï†de"> Theme - <a href="https://github.com/80maker/vuepress-theme-maker" target="_blank" rel="external nofollow noopener">Maker</a></span></p></div></div></div> <div class="theme-main"><div class="theme-main__inner post"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting"><header class="article__header"><h1 itemprop="name headline" class="post-title">
          ã€ŠReactè¿›é˜¶æŒ‡å—ã€‹ç¬”è®°
        </h1> <div class="post-meta"><!----> <div class="post-meta__date"><i class="icon-calendar"></i> <time pubdate itemprop="datePublished" datetime="2022-04-02T00:00:00.000Z">
      Apr 02, 2022
    </time></div> <div class="post-meta__cates"><i class="icon-cate"></i> <a href="/docs/categories/React/">
      React
    </a></div> <div class="post-meta__reading"><i class="icon-time"></i>
    3.5k words in 13 min
  </div> <div id="" data-flag-title="Your Article Title" class="leancloud_visitors"><i class="icon-eye"></i> <i class="leancloud-visitors-count">--</i></div></div></header> <div class="article-con"><div itemprop="articleBody" class="article-content content__default copy-code-enabled"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <blockquote><p>åŸæ–‡ï¼š<a href="https://juejin.cn/book/6945998773818490884" target="_blank" rel="noopener noreferrer">ã€ŠReact è¿›é˜¶æŒ‡å—ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
ä¸ªäºº demo: demo/react-demo</p></blockquote> <p>æºç ä¸‹è½½ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> clone https://hub.fastgit.org/facebook/react.git
<span class="token function">git</span> checkout v16.19
</code></pre></div><h2 id="è®¤è¯†-jsx"><a href="#è®¤è¯†-jsx" class="header-anchor">#</a> è®¤è¯† JSX</h2> <h3 id="jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ"><a href="#jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ" class="header-anchor">#</a> JSX è¢« React å¤„ç†æˆä»€ä¹ˆ</h3> <div class="language- extra-class"><pre class="language-text"><code>const toLearn = [ 'react' , 'vue' , 'webpack' , 'nodejs'  ]

const TextComponent = ()=&gt; &lt;div&gt; hello , i am function component &lt;/div&gt;

class Index extends React.Component{
    status = false /* çŠ¶æ€ */
    renderFoot=()=&gt; &lt;div&gt; i am foot&lt;/div&gt;
    render(){
        /* ä»¥ä¸‹éƒ½æ˜¯å¸¸ç”¨çš„jsxå…ƒç´ èŠ‚ */
        return &lt;div style={{ marginTop:'100px' }}   &gt;
            { /* element å…ƒç´ ç±»å‹ */ }
            &lt;div&gt;hello,world&lt;/div&gt;
            { /* fragment ç±»å‹ */ }
            &lt;React.Fragment&gt;
                &lt;div&gt; ğŸ‘½ğŸ‘½ &lt;/div&gt;
            &lt;/React.Fragment&gt;
            { /* text æ–‡æœ¬ç±»å‹ */ }
            my name is alien
            { /* æ•°ç»„èŠ‚ç‚¹ç±»å‹ */ }
            { toLearn.map(item=&gt; &lt;div key={item} &gt;let us learn { item } &lt;/div&gt; ) }
            { /* ç»„ä»¶ç±»å‹ */ }
            &lt;TextComponent/&gt;
            { /* ä¸‰å…ƒè¿ç®— */  }
            { this.status ? &lt;TextComponent /&gt; : &lt;div&gt;ä¸‰å…ƒè¿ç®—&lt;/div&gt; }
            { /* å‡½æ•°æ‰§è¡Œ */ }
            { this.renderFoot() }
            &lt;button onClick={ ()=&gt; console.log( this.render() ) } &gt;æ‰“å°renderåçš„å†…å®¹&lt;/button&gt;
        &lt;/div&gt;
    }
}
</code></pre></div><ol><li>babel ç¼–è¯‘ï¼šReact.createElement, æ³¨æ„ 3 ä¸ªå‚æ•°ä½œç”¨
<img src="/docs/assets/img/JSX-babel.2bd77664.jpg" alt="å›¾ç‰‡"></li> <li>createElement å¤„ç†åçš„æ ·å­ æ³¨æ„è½¬æ¢ç±»å‹çš„æ˜ ç…§å…³ç³»
<img src="/docs/assets/img/jsx-creatElement.516f32d7.jpg" alt="å›¾ç‰‡"></li> <li>React åº•å±‚è°ƒå’Œå¤„ç†åï¼Œç»ˆå°†å˜æˆä»€ä¹ˆï¼Ÿ
React element å¯¹è±¡çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½ä¼šå½¢æˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ fiber å¯¹è±¡ï¼Œç„¶åé€šè¿‡ siblingã€returnã€child å°†æ¯ä¸€ä¸ª fiber å¯¹è±¡è”ç³»èµ·æ¥ã€‚</li></ol> <h3 id="react-api"><a href="#react-api" class="header-anchor">#</a> React API</h3> <ul><li>React.Children.toArrayï¼Œæ‰å¹³åŒ–ï¼Œè§„èŒƒåŒ– children æ•°ç»„</li> <li>React.Children.forEachï¼Œéå† childrenï¼Œå†…éƒ¨å·²æ‰å¹³åŒ– children</li> <li>React.createElement</li> <li>react.cloneElement</li></ul> <h3 id="qa"><a href="#qa" class="header-anchor">#</a> QA</h3> <ol><li>è€ç‰ˆæœ¬çš„ React ä¸­ï¼Œä¸ºä»€ä¹ˆå†™ jsx çš„æ–‡ä»¶è¦é»˜è®¤å¼•å…¥ React</li></ol> <div class="language- extra-class"><pre class="language-text"><code>import React from 'react'
function Index(){
    return &lt;div&gt;hello,world&lt;/div&gt;
}
</code></pre></div><p>ç­”ï¼šå› ä¸º jsx åœ¨è¢« babel ç¼–è¯‘åï¼Œå†™çš„ jsx ä¼šå˜æˆä¸Šè¿° React.createElement å½¢å¼ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ Reactï¼Œé˜²æ­¢æ‰¾ä¸åˆ° React å¼•èµ·æŠ¥é”™ã€‚</p> <h2 id="component"><a href="#component" class="header-anchor">#</a> Component</h2> <p>å¯é€šè¿‡åŸå‹é“¾çš„æ–¹å¼ç»™ç±»å¢åŠ é»˜è®¤æ“ä½œ</p> <div class="language- extra-class"><pre class="language-text"><code>class Index extends React.Component{
    constructor(...arg){
       super(...arg)                        /* æ‰§è¡Œ react åº•å±‚ Component å‡½æ•° */
    }
    state = {}                              /* state */
    static number = 1                       /* å†…ç½®é™æ€å±æ€§ */
    componentDidMount(){                    /* ç”Ÿå‘½å‘¨æœŸ */
        console.log(Index.number,Index.number1) // æ‰“å° 1 , 2
    }
    render(){                               /* æ¸²æŸ“å‡½æ•° */
        return &lt;div style={{ marginTop:'50px' }} onClick={ this.handerClick }  &gt;hello,React!&lt;/div&gt;
    }
}
Index.number1 = 2                           /* å¤–ç½®é™æ€å±æ€§ */
Index.prototype.handleClick = ()=&gt; console.log(222) /* æ–¹æ³•: ç»‘å®šåœ¨ Index åŸå‹é“¾çš„ æ–¹æ³•*/
</code></pre></div><p>ç»„ä»¶çš„ç»§æ‰¿ï¼šstate å’Œç”Ÿå‘½å‘¨æœŸä¼šè¢«ç»§æ‰¿åçš„ç»„ä»¶ä¿®æ”¹ã€‚åƒä¸‹åˆ— demo ä¸­ï¼ŒPerson ç»„ä»¶ä¸­çš„ componentDidMount ç”Ÿå‘½å‘¨æœŸå°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>/* äººç±» */
class Person extends React.Component{
    constructor(props){
        super(props)
        console.log('hello , i am person')
    }
    componentDidMount(){ console.log(1111)  }
    eat(){    /* åƒé¥­ */ }
    sleep(){  /* ç¡è§‰ */  }
    ddd(){   console.log('æ‰“è±†è±†')  /* æ‰“è±†è±† */ }
    render(){
        return &lt;div&gt;
            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸€ä¸ªperson
        &lt;/div&gt;
    }
}
/* ç¨‹åºå‘˜ */
class Programmer extends Person{
    constructor(props){
        super(props)
        console.log('hello , i am Programmer too')
    }
    componentDidMount(){  console.log(this)  }
    code(){ /* æ•²ä»£ç  */ }
    render(){
        return &lt;div style={ { marginTop:'50px' } } &gt;
            { super.render() } { /* è®© Person ä¸­çš„ render æ‰§è¡Œ */ }
            æˆ‘è¿˜æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼    { /* æ·»åŠ è‡ªå·±çš„å†…å®¹ */ }
        &lt;/div&gt;
    }
}
export default Programmer
</code></pre></div><p>ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«ï¼š</p> <ol><li>ç±»ç»„ä»¶çš„æœ¬è´¨å°±æ˜¯ ç±»å’Œå‡½æ•°è¿˜æœ‰ oop æ€æƒ³ä¸­çš„ç»§æ‰¿ï¼Œåœ¨æ­¤ä¹‹ä¸Šéœ€è¦å†…ç½®å¤„ç† state å’Œ props ç»„ä»¶çš„çŠ¶æ€ç»´æŠ¤ï¼ŒçŠ¶æ€ -&gt; ui -&gt; æ¸²æŸ“</li> <li>å‡½æ•°ç»„ä»¶ æ²¡æœ‰å®ä¾‹åŒ–çš„æ¦‚å¿µï¼ŒFP æ€æƒ³ï¼Œæ¯ä¸ªç»„ä»¶åº”è¯¥åªå¤„ç†ä¸€ä¸ªé€»è¾‘äº‹ç‰©ä¸æƒ³ class ç»„ä»¶é‚£ä¹ˆå¤åˆï¼Œå¦å¤–å®ƒæ²¡æœ‰è½¬æ€å­˜å‚¨èƒ½åŠ›å¿…é¡»ä¾èµ– hook</li></ol> <h3 id="state"><a href="#state" class="header-anchor">#</a> State</h3> <p>ç»„ä»¶åˆå§‹åŒ–è¿‡ç¨‹ä¸­ç»‘å®šäº†è´Ÿè´£æ›´æ–°çš„ Updater å¯¹è±¡ï¼Œå¯¹äºå¦‚æœè°ƒç”¨ setState æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ React åº•å±‚è°ƒç”¨ Updater å¯¹è±¡ä¸Šçš„ enqueueSetState æ–¹æ³•ã€‚</p> <h4 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="header-anchor">#</a> ç±»ç»„ä»¶</h4> <p><strong>unstable_batchedUpdates</strong>:å¼‚æ­¥ç¯å¢ƒä¸‹ï¼Œç»§å¼€å¯æ‰¹é‡æ›´æ–°æ¨¡å¼</p> <div class="language- extra-class"><pre class="language-text"><code>setTimeout(()=&gt;{
    unstable_batchedUpdates(()=&gt;{
        this.setState({ number:this.state.number + 1 })
        console.log(this.state.number)
        this.setState({ number:this.state.number + 1})
        console.log(this.state.number)
        this.setState({ number:this.state.number + 1 })
        console.log(this.state.number)
    })
})
</code></pre></div><p><strong>flushSync</strong>:æå‡æ›´æ–°ä¼˜å…ˆçº§</p> <div class="language- extra-class"><pre class="language-text"><code>handerClick=()=&gt;{
    setTimeout(()=&gt;{
        this.setState({ number: 1  })
    })
    this.setState({ number: 2  })
    ReactDOM.flushSync(()=&gt;{
        this.setState({ number: 3  })
    })
    this.setState({ number: 4  })
}
render(){
   console.log(this.state.number)
   return ...
}
</code></pre></div><h4 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="header-anchor">#</a> å‡½æ•°ç»„ä»¶</h4> <div class="language- extra-class"><pre class="language-text"><code>[ â‘ state , â‘¡dispatch ] = useState(â‘¢initData)
</code></pre></div><ul><li>æ³¨æ„ â‘¡ â‘¢ æ˜¯å‡½æ•°çš„æƒ…å†µ</li></ul> <h4 id="qa-2"><a href="#qa-2" class="header-anchor">#</a> QA</h4> <ol><li>ä¸ºä»€ä¹ˆå¼‚æ­¥ç¯å¢ƒä¸­æ‰¹é‡æ›´æ–°è§„åˆ™è¢«æ‰“ç ´ï¼Œ setState åèµ° render??????å®å¾®ä»»åŠ¡</li> <li>useState å‚æ•°å¯ä»¥æ˜¯ä¸ªå‡½æ•°ï¼Œåˆå§‹å€¼æ˜¯å‡½æ•°æ‰§è¡Œåçš„ç»“æœï¼Ÿ</li> <li>RN æ²¡æœ‰ ReactDOM.flushSync</li> <li>legacy æ¨¡å¼ï¼Œè¿˜æœ‰ blocking æ¨¡å¼ã€concurrent æ¨¡å¼æ¦‚å¿µ</li> <li>ï¼ˆå›¾ï¼‰åˆå¹¶ state å’Œè°ƒå’Œæ ‘çš„é¡ºåºæ˜¯å¦åº”è¯¥åè¿‡æ¥</li> <li>åˆå¹¶ state çš„è¿‡ç¨‹åœ¨å“ªå„¿</li> <li>ä¸‹åˆ—ç‚¹å‡»äº‹ä»¶çš„æ‰“å°ç»“æœ</li> <li>å®ä»»åŠ¡å¾®ä»»åŠ¡ï¼Ÿjs ä»»åŠ¡ç³»ç»Ÿ</li> <li>useState åˆå§‹åŒ–å¯¹è±¡æ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æƒ…å†µï¼Œæ”¹å˜åˆå§‹å¯¹è±¡ï¼ŒuseState çš„å¯¹è±¡ä¼šæ”¹å˜å—</li></ol> <div class="language- extra-class"><pre class="language-text"><code>handleClick= () =&gt; {
          this.setState({ number:this.state.number + 1 },()=&gt;{   console.log( 'callback1', this.state.number)  })
          console.log(this.state.number)
          this.setState({ number:this.state.number + 2 },()=&gt;{   console.log( 'callback2', this.state.number)  })
          console.log(this.state.number)
          this.setState({ number:this.state.number + 3 },()=&gt;{   console.log( 'callback3', this.state.number)  })
          console.log(this.state.number)
    }
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>0, 0, 0, callback1 3 ,callback2 3 ,callback3 3
</code></pre></div><h3 id="è‡ªå®šä¹‰-hooks"><a href="#è‡ªå®šä¹‰-hooks" class="header-anchor">#</a> è‡ªå®šä¹‰ Hooks</h3> <h4 id="qa-3"><a href="#qa-3" class="header-anchor">#</a> QA</h4> <ul><li>æ‰§è¡Œå‰¯ä½œç”¨ã€demo å¥½åƒæœ‰é—®é¢˜ï¼Œæ•²ä¸€ä¸ª</li></ul> <h2 id="éšè®°"><a href="#éšè®°" class="header-anchor">#</a> éšè®°</h2> <ul><li>æ‰å¹³åŒ–çš„æ„æ€ï¼Ÿæ ‘å½¢ç»“æ„å¦‚ä½•æ‰å¹³åŒ–</li> <li>fiber å¯¹è±¡</li></ul> <h2 id="æ·±å…¥-props"><a href="#æ·±å…¥-props" class="header-anchor">#</a> æ·±å…¥ props</h2> <h3 id="props-æ“ä½œæŠ€å·§"><a href="#props-æ“ä½œæŠ€å·§" class="header-anchor">#</a> props æ“ä½œæŠ€å·§</h3> <p>æŠ½è±¡ Props ä¸€èˆ¬ç”¨äº<strong>è·¨å±‚çº§ä¼ é€’ props</strong>ï¼Œä¸€èˆ¬ä¸éœ€è¦å…·ä½“æŒ‡å‡º props ä¸­æŸä¸ªå±æ€§ï¼Œè€Œæ˜¯å°† props ç›´æ¥ä¼ å…¥æˆ–è€…æ˜¯æŠ½ç¦»åˆ°å­ç»„ä»¶ä¸­</p> <h4 id="æ··å…¥-props"><a href="#æ··å…¥-props" class="header-anchor">#</a> æ··å…¥ props</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fatherProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mes</span><span class="token operator">:</span> <span class="token string">&quot;let us learn React !&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Son <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>fatherProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> indexProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;alien&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&quot;28&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Father <span class="token punctuation">{</span><span class="token operator">...</span>indexProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰“å°
<img src="/docs/assets/img/props-to.e4950e4a.jpg" alt="å›¾ç‰‡">
å°† Index ç»„ä»¶ indexProps æŠ½è±¡ä¼ é€’ç»™ Sonï¼Œä¸€æ–¹é¢æ··å…¥ fatherProps</p> <h4 id="æŠ½ç¦»-props"><a href="#æŠ½ç¦»-props" class="header-anchor">#</a> æŠ½ç¦» props</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>fatherProps <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Son <span class="token punctuation">{</span><span class="token operator">...</span>fatherProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> indexProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;alien&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&quot;28&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mes</span><span class="token operator">:</span> <span class="token string">&quot;let us learn React !&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Father <span class="token punctuation">{</span><span class="token operator">...</span>indexProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å°† indexProps ä¸­çš„ age å±æ€§æŠ½ç¦»å‡ºæ¥ã€‚</p> <h4 id="éšå¼æ³¨å…¥-props"><a href="#éšå¼æ³¨å…¥-props" class="header-anchor">#</a> éšå¼æ³¨å…¥ props</h4> <p>React.cloneElement</p> <h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h4> <ul><li>å¯¹ props ä¸­ children çš„æ“ä½œï¼Œæ˜¾ç¤ºä¸å¦ã€åˆ¤æ–­ç±»å‹åšè‡ªå·±çš„æ¸²æŸ“é€»è¾‘ç­‰</li> <li>å¯¹ props ä¸­çš„ children çš„ props æ“ä½œï¼Œæ³¨å…¥æ–°çš„ props ç­‰</li></ul> <p>å®¹å™¨æŠ€å·§ =&gt; è·å– children =&gt; åšè‡ªå®šä¹‰æ“ä½œ</p> <h4 id="qa-4"><a href="#qa-4" class="header-anchor">#</a> QA</h4> <p>FormItem.displayName ä¸ºä»€ä¹ˆè¿™ä¹ˆå– children.type.displayName</p> <h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h2> <ul><li>æŒ‚è½½
<img src="/docs/assets/img/lifecycle-mont.24fff6e1.jpg" alt="å›¾ç‰‡"></li></ul> <p>constructor -&gt; getDerivedStateFromProps / componentWillMount -&gt; render -&gt; componentDidMount</p> <ul><li>æ›´æ–°
<img src="/docs/assets/img/lifecycle-update.090326d6.jpg" alt="å›¾ç‰‡"></li></ul> <p>componentWillReceiveProps( props æ”¹å˜) / getDerivedStateFromProp -&gt; shouldComponentUpdate -&gt; componentWillUpdate -&gt; render -&gt; getSnapshotBeforeUpdate -&gt; componentDidUpdate</p> <ul><li><p>é”€æ¯
commit é˜¶æ®µè°ƒç”¨ componentWillUnmount</p></li> <li><p>æ€»è§ˆ
<img src="/docs/assets/img/lifecycle-all-class.5860a3e1.jpg" alt="å›¾ç‰‡"></p></li></ul> <h3 id="å„é˜¶æ®µè¦ç‚¹"><a href="#å„é˜¶æ®µè¦ç‚¹" class="header-anchor">#</a> å„é˜¶æ®µè¦ç‚¹</h3> <ul><li>getDerivedStateFromPropsï¼šåªæ˜¯é™æ€æ–¹æ³•ã€è®¿é—®ä¸åˆ° thisï¼Œç»„ä»¶æ›´æ–°ï¼Œå°±ä¼šæ‰§è¡Œ getDerivedStateFromPropsï¼Œä¸ç®¡æ˜¯ props æ”¹å˜ï¼Œè¿˜æ˜¯ setState ï¼Œæˆ–æ˜¯ forceUpdate ã€‚</li> <li>getSnapshotBeforeUpdate: è·å– æ›´æ–°å‰ DOM ä¿¡æ¯çš„æœ€ä½³æ—¶æœŸï¼ŒgetSnapshotBeforeUpdate å°†è¿”å›ä¸€ä¸ªå€¼ä½œä¸ºä¸€ä¸ª snapShot(å¿«ç…§)ï¼Œä¼ é€’ç»™ componentDidUpdate ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°</li></ul> <h2 id="context"><a href="#context" class="header-anchor">#</a> context</h2> <h3 id="consumer-çš„ä¸‰ç§å†™æ³•"><a href="#consumer-çš„ä¸‰ç§å†™æ³•" class="header-anchor">#</a> consumer çš„ä¸‰ç§å†™æ³•</h3> <ul><li>useContext</li> <li>å‡½æ•°å¼</li> <li>contextType</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç±»ç»„ä»¶ - contextType æ–¹å¼</span>
<span class="token keyword">class</span> <span class="token class-name">ConsumerDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> background <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">,</span> background <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ¶ˆè´¹è€…</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ConsumerDemo<span class="token punctuation">.</span>contextType <span class="token operator">=</span> ThemeContext<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConsumerDemo</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div><h3 id="provider-ç‰¹æ€§"><a href="#provider-ç‰¹æ€§" class="header-anchor">#</a> Provider ç‰¹æ€§</h3> <ol><li>Provider ä½œä¸ºæä¾›è€…ä¼ é€’ context ï¼Œprovider ä¸­ value å±æ€§æ”¹å˜ä¼šä½¿æ‰€æœ‰æ¶ˆè´¹ context çš„ç»„ä»¶é‡æ–°æ›´æ–°ã€‚</li> <li>Provider å¯ä»¥é€å±‚ä¼ é€’ contextï¼Œä¸‹ä¸€å±‚ Provider ä¼šè¦†ç›–ä¸Šä¸€å±‚ Providerã€‚</li></ol> <h3 id="qa-5"><a href="#qa-5" class="header-anchor">#</a> QA</h3> <ul><li>contextType åº•å±‚å¦‚ä½•å¤„ç†çš„</li></ul> <h3 id="æ‹“å±•"><a href="#æ‹“å±•" class="header-anchor">#</a> æ‹“å±•</h3> <ul><li>æ³¨æ„å…¶ä¸­çš„ä¾‹å­ï¼šProvider value æ”¹å˜ å¯¼è‡´ç»„ä»¶æ ‘é‡æ–°æ¸²æŸ“çš„ä¾‹å­
<blockquote><p>æ²¡æœ‰ memo å¤„ç†ï¼ŒuseState ä¼šè®© ProviderDemo é‡æ–° render ï¼Œæ­¤æ—¶ son æ²¡æœ‰å¤„ç†ï¼Œå°±ä¼šè·Ÿéšçˆ¶ç»„ä»¶ render</p></blockquote></li></ul> <h2 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="header-anchor">#</a> é«˜é˜¶ç»„ä»¶</h2> <p>é«˜é˜¶ç»„ä»¶èƒ½å¤ç”¨å“ªäº›ä»£ç é€»è¾‘ï¼Ÿ</p> <ul><li>æ¸²æŸ“åŠ«æŒï¼šæ‡’åŠ è½½ã€åŠ¨æ€åŠ è½½ã€æ¸²æŸ“ä¸å¦ã€ç»Ÿä¸€ç©ºå±•ç¤ºã€ç»Ÿä¸€å¼‚å¸¸å±•ç¤ºã€æ›¿æ¢èŠ‚ç‚¹ç­‰</li> <li>æ··å…¥ Props: æ–°å¢ props,ä¼ é€’å·²çŸ¥ props å€¼ï¼Œæ¯”å¦‚é¡¹ç›®ä¸­æƒ³è®©ä¸€ä¸ªé Route ç»„ä»¶ï¼Œä¹Ÿèƒ½é€šè¿‡ props è·å–è·¯ç”±å®ç°è·³è½¬ï¼Œä½†æ˜¯ä¸æƒ³é€šè¿‡çˆ¶çº§è·¯ç”±ç»„ä»¶å±‚å±‚ç»‘å®š props ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ª HOC æŠŠæ”¹å˜è·¯ç”±çš„ history å¯¹è±¡æ··å…¥ props ä¸­ï¼Œäºæ˜¯ withRoute è¯ç”Ÿäº†ã€‚</li> <li>ç›‘æ§ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼šå¦‚å¯¹ç»„ä»¶å†…çš„ç‚¹å‡»äº‹ä»¶åšä¸€äº›ç›‘æ§ï¼Œæˆ–è€…åŠ ä¸€æ¬¡é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯¹ç°æœ‰ props åšä¸€äº›åŠ å·¥é‡æ–°ä¼ é€’</li></ul> <p>ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶</p> <ul><li>å±æ€§ä»£ç†ï¼šæ— ä¾µå…¥ã€å¤šå±‚åµŒå¥—æ¯”è¾ƒå®‰å…¨ã€ä½è€¦åˆï¼Œæ³¨æ„å¤„ç† Refã€é™æ€å±æ€§</li> <li>åå‘ç»§æ‰¿ï¼šä¾¿äºç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€å¤„ç† Refã€é™æ€å±æ€§ï¼Œå¤šä¸ªåå‘ç»§æ‰¿ä¼šç›¸äº’è¦†ç›–ï¼Œè€¦åˆè¾ƒé«˜ï¼Œéœ€è¦çŸ¥é“åŸå§‹ç»„ä»¶</li></ul> <h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="header-anchor">#</a> ç¤ºä¾‹ä»£ç </h3> <ol><li>å¼ºåŒ– props</li></ol> <p>åŠ å…¥ä¸€äº›å…¶ä»–çš„ props ï¼Œå¼ºåŒ–åŸå§‹ç»„ä»¶åŠŸèƒ½</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è®©ç»„ä»¶ä¹Ÿå¯ä»¥è·å–åˆ°è·¯ç”±å¯¹è±¡ï¼Œè¿›è¡Œè·¯ç”±è·³è½¬ç­‰æ“ä½œ</span>
<span class="token keyword">function</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> displayName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">withRouter(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Component<span class="token punctuation">.</span>displayName <span class="token operator">||</span> Component<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/*  è·å– */</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> wrappedComponentRef<span class="token punctuation">,</span> <span class="token operator">...</span>remainingProps <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>RouterContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Component
              <span class="token punctuation">{</span><span class="token operator">...</span>remainingProps<span class="token punctuation">}</span> <span class="token comment">// ç»„ä»¶åŸå§‹çš„props</span>
              <span class="token punctuation">{</span><span class="token operator">...</span>context<span class="token punctuation">}</span> <span class="token comment">// å­˜åœ¨è·¯ç”±å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼Œhistory  location ç­‰</span>
              ref<span class="token operator">=</span><span class="token punctuation">{</span>wrappedComponentRef<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>RouterContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token constant">C</span><span class="token punctuation">.</span>displayName <span class="token operator">=</span> displayName<span class="token punctuation">;</span>
  <span class="token constant">C</span><span class="token punctuation">.</span>WrappedComponent <span class="token operator">=</span> Component<span class="token punctuation">;</span>
  <span class="token comment">/* ç»§æ‰¿é™æ€å±æ€§ */</span>
  <span class="token keyword">return</span> <span class="token function">hoistStatics</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> withRouter<span class="token punctuation">;</span>
</code></pre></div><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="header-anchor">#</a> æ³¨æ„äº‹é¡¹</h3> <ol><li>ä¸è¦åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æˆ–ç±»ç»„ä»¶ render å‡½æ•°ä¸­ä½¿ç”¨ HOC</li></ol> <p>æ¯ä¸€æ¬¡ç±»ç»„ä»¶è§¦å‘ render æˆ–è€…å‡½æ•°ç»„ä»¶æ‰§è¡Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ WrapHomeï¼Œreact diff ä¼šåˆ¤å®šä¸¤æ¬¡ä¸æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå¸è½½è€ç»„ä»¶ï¼Œé‡æ–°æŒ‚è½½æ–°ç»„ä»¶ï¼Œé€ æˆæ–°èƒ½æµªè´¹</p> <ol start="2"><li>å¤„ç† Ref</li> <li>å¤„ç†é™æ€å±æ€§</li> <li>å¤š HOC æ—¶ æ³¨æ„æ˜¯å¦ä¼šç›¸äº’å½±å“</li></ol> <h2 id="æ¸²æŸ“æ§åˆ¶"><a href="#æ¸²æŸ“æ§åˆ¶" class="header-anchor">#</a> æ¸²æŸ“æ§åˆ¶</h2> <p>useMemo åŸç†ï¼šuseMemo ä¼šè®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œ create çš„è¿”å›å€¼ï¼Œå¹¶æŠŠå®ƒç»‘å®šåœ¨å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber å¯¹è±¡ä¸Šï¼Œåªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œç¼“å­˜å€¼å°±ä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯ deps ä¸­å¦‚æœæœ‰ä¸€é¡¹æ”¹å˜ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œ create ï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„å€¼è®°å½•åˆ° fiber å¯¹è±¡ä¸Š</p> <p>æ³¨æ„ç»™ç»„ä»¶ props ä¼ ç®­å¤´å‡½æ•°ã€å¯¹è±¡çš„æƒ…å†µï¼Œä¼šä½¿ PureComponent å¤±æ•ˆ</p> <p>React.memo å½“äºŒä¸ªå‚æ•° compare ä¸å­˜åœ¨æ—¶ï¼Œä¼šç”¨æµ…æ¯”è¾ƒåŸåˆ™å¤„ç† props ï¼Œç›¸å½“äºä»…æ¯”è¾ƒ props ç‰ˆæœ¬çš„ pureComponent</p> <p>æ‰“ç ´æ¸²æŸ“é™åˆ¶ï¼š</p> <ol><li><p>forceUpdateã€‚ç±»ç»„ä»¶æ›´æ–°å¦‚æœè°ƒç”¨çš„æ˜¯ forceUpdate è€Œä¸æ˜¯ setState ï¼Œä¼šè·³è¿‡ PureComponent çš„æµ…æ¯”è¾ƒå’Œ shouldComponentUpdate è‡ªå®šä¹‰æ¯”è¾ƒã€‚å…¶åŸç†æ˜¯ç»„ä»¶ä¸­è°ƒç”¨ forceUpdate æ—¶å€™ï¼Œå…¨å±€ä¼šå¼€å¯ä¸€ä¸ª hasForceUpdate çš„å¼€å…³ã€‚å½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è¿™ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€ï¼Œå°±ç›´æ¥è·³è¿‡ shouldUpdate ã€‚</p></li> <li><p>context ç©¿é€ï¼Œä¸Šè¿°çš„å‡ ç§æ–¹å¼ï¼Œéƒ½ä¸èƒ½æœ¬è´¨ä¸Šé˜»æ–­ context æ”¹å˜ï¼Œè€Œå¸¦æ¥çš„æ¸²æŸ“ç©¿é€ï¼Œæ‰€ä»¥å¼€å‘è€…åœ¨ä½¿ç”¨ Context è¦æ ¼å¤–å°å¿ƒï¼Œæ—¢ç„¶é€‰æ‹©äº†æ¶ˆè´¹ context ï¼Œå°±è¦æ‰¿æ‹… context æ”¹å˜ï¼Œå¸¦æ¥çš„æ›´æ–°ä½œç”¨ã€‚</p></li></ol> <p>æ¸²æŸ“æµç¨‹å›¾
<img src="/docs/assets/img/render-step.09225c1d.jpg" alt="å›¾ç‰‡"></p> <h2 id="äº‹ä»¶åŸç†"><a href="#äº‹ä»¶åŸç†" class="header-anchor">#</a> äº‹ä»¶åŸç†</h2> <ul><li>é˜»æ­¢å†’æ³¡ï¼šReact ä¸­å¦‚æœæƒ³è¦é˜»æ­¢äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œå¯ä»¥ç”¨ e.stopPropagation()</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ŒhandleFatherClick äº‹ä»¶è®²ä¸åœ¨è§¦å‘ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleFatherClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å†’æ³¡åˆ°çˆ¶çº§&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleFatherClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>ç‚¹å‡»<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="fiber"><a href="#fiber" class="header-anchor">#</a> Fiber</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">FiberNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span> <span class="token comment">// fiber æ ‡ç­¾ è¯æ˜æ˜¯ä»€ä¹ˆç±»å‹fiberã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span> <span class="token comment">// keyè°ƒå’Œå­èŠ‚ç‚¹æ—¶å€™ç”¨åˆ°ã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// domå…ƒç´ æ˜¯å¯¹åº”çš„å…ƒç´ ç±»å‹ï¼Œæ¯”å¦‚divï¼Œç»„ä»¶æŒ‡å‘ç»„ä»¶å¯¹åº”çš„ç±»æˆ–è€…å‡½æ•°ã€‚</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>stateNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å¯¹åº”çš„çœŸå®domå…ƒç´ ï¼Œç±»ç»„ä»¶æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼Œå¯ä»¥è¢«refè·å–ã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>return <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘çˆ¶çº§fiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å­çº§fiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘å…„å¼Ÿfiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// ç´¢å¼•</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// refæŒ‡å‘ï¼Œrefå‡½æ•°ï¼Œæˆ–è€…refå¯¹è±¡ã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>pendingProps <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span> <span class="token comment">// åœ¨ä¸€æ¬¡æ›´æ–°ä¸­ï¼Œä»£è¡¨elementåˆ›å»º</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½•ä¸Šä¸€æ¬¡æ›´æ–°å®Œæ¯•åçš„props</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç±»ç»„ä»¶å­˜æ”¾setStateæ›´æ–°é˜Ÿåˆ—ï¼Œå‡½æ•°ç»„ä»¶å­˜æ”¾</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç±»ç»„ä»¶ä¿å­˜stateä¿¡æ¯ï¼Œå‡½æ•°ç»„ä»¶ä¿å­˜hooksä¿¡æ¯ï¼Œdomå…ƒç´ ä¸ºnull</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// contextæˆ–æ˜¯æ—¶é—´çš„ä¾èµ–é¡¹</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span> <span class="token comment">//æè¿°fiberæ ‘çš„æ¨¡å¼ï¼Œæ¯”å¦‚ ConcurrentMode æ¨¡å¼</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>effectTag <span class="token operator">=</span> NoEffect<span class="token punctuation">;</span> <span class="token comment">// effectæ ‡ç­¾ï¼Œç”¨äºæ”¶é›†effectList</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªeffect</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>firstEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ä¸€ä¸ªeffect</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æœ€åä¸€ä¸ªeffect</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>expirationTime <span class="token operator">=</span> NoWork<span class="token punctuation">;</span> <span class="token comment">// é€šè¿‡ä¸åŒè¿‡æœŸæ—¶é—´ï¼Œåˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¿‡æœŸï¼Œ åœ¨v17ç‰ˆæœ¬ç”¨laneè¡¨ç¤ºã€‚</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>alternate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//åŒç¼“å­˜æ ‘ï¼ŒæŒ‡å‘ç¼“å­˜çš„fiberã€‚æ›´æ–°é˜¶æ®µï¼Œä¸¤é¢—æ ‘äº’ç›¸äº¤æ›¿ã€‚</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="render-commit"><a href="#render-commit" class="header-anchor">#</a> render &amp; commit</h3> <h4 id="render"><a href="#render" class="header-anchor">#</a> render</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// react-reconciler/src/ReactFiberWorkLoop.js</span>

<span class="token keyword">function</span> <span class="token function">workLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>workInProgress <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workInProgress <span class="token operator">=</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span>workInProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è°ƒå’Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªå‘ç”Ÿæ›´æ–°çš„ fiber éƒ½ä¼šä½œä¸ºä¸€æ¬¡ workInProgress</p> <p>workLoop å°±æ˜¯æ‰§è¡Œæ¯ä¸€ä¸ªå•å…ƒçš„è°ƒåº¦å™¨ï¼Œå¦‚æœæ¸²æŸ“æ²¡æœ‰è¢«ä¸­æ–­ï¼Œé‚£ä¹ˆ workLoop ä¼šéå†ä¸€é fiber æ ‘</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// react-reconciler/src/ReactFiberWorkLoop.js</span>

<span class="token keyword">function</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  next <span class="token operator">=</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> unitOfWork<span class="token punctuation">,</span> renderExpirationTime<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰ç…§ child æŒ‡é’ˆé€å±‚å‘ä¸‹è°ƒå’Œï¼ŒæœŸé—´ä¼šæ‰§è¡Œå‡½æ•°ç»„ä»¶ï¼Œå®ä¾‹ç±»ç»„ä»¶ï¼Œdiff è°ƒå’Œå­èŠ‚ç‚¹ï¼Œæ‰“ä¸åŒeffectTagã€‚</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    next <span class="token operator">=</span> <span class="token function">completeUnitOfWork</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‘ä¸Šå½’å¹¶çš„è¿‡ç¨‹ï¼Œå¦‚æœæœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œä¼šè¿”å› siblingå…„å¼Ÿï¼Œæ²¡æœ‰è¿”å› return çˆ¶çº§ï¼Œä¸€ç›´è¿”å›åˆ° fiebrRoot ï¼ŒæœŸé—´å¯ä»¥å½¢æˆeffectListï¼Œå¯¹äºåˆå§‹åŒ–æµç¨‹ä¼šåˆ›å»º DOM ï¼Œå¯¹äº DOM å…ƒç´ è¿›è¡Œäº‹ä»¶æ”¶é›†ï¼Œå¤„ç†styleï¼ŒclassNameç­‰ã€‚</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ€»ç»“ beginWork ä½œç”¨å¦‚ä¸‹ï¼š</p> <p>å¯¹äºç»„ä»¶ï¼Œæ‰§è¡Œéƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œ render ï¼Œå¾—åˆ°æœ€æ–°çš„ children ã€‚
å‘ä¸‹éå†è°ƒå’Œ children ï¼Œå¤ç”¨ oldFiber ( diff ç®—æ³•)ï¼Œdiff æµç¨‹åœ¨ç¬¬åäºŒç« å·²ç»è®²è¿‡äº†ã€‚
æ‰“ä¸åŒçš„å‰¯ä½œç”¨æ ‡ç­¾ effectTag ï¼Œæ¯”å¦‚ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…å…ƒç´ çš„å¢åŠ ï¼Œåˆ é™¤ï¼Œæ›´æ–°ã€‚</p> <p>completeUnitOfWork çš„æµç¨‹æ˜¯è‡ªä¸‹å‘ä¸Šçš„ï¼Œé‚£ä¹ˆ completeUnitOfWork è¿‡ç¨‹ä¸»è¦åšå†™ä»€ä¹ˆå‘¢ï¼Ÿ</p> <p>é¦–å…ˆ completeUnitOfWork ä¼šå°† effectTag çš„ Fiber èŠ‚ç‚¹ä¼šè¢«ä¿å­˜åœ¨ä¸€æ¡è¢«ç§°ä¸º effectList çš„å•å‘é“¾è¡¨ä¸­ã€‚åœ¨ commit é˜¶æ®µï¼Œå°†ä¸å†éœ€è¦éå†æ¯ä¸€ä¸ª fiber ï¼Œåªéœ€è¦æ‰§è¡Œæ›´æ–° effectList å°±å¯ä»¥äº†ã€‚
completeWork é˜¶æ®µå¯¹äºç»„ä»¶å¤„ç† context ï¼›å¯¹äºå…ƒç´ æ ‡ç­¾åˆå§‹åŒ–ï¼Œä¼šåˆ›å»ºçœŸå® DOM ï¼Œå°†å­å­™ DOM èŠ‚ç‚¹æ’å…¥åˆšç”Ÿæˆçš„ DOM èŠ‚ç‚¹ä¸­ï¼›ä¼šè§¦å‘ diffProperties å¤„ç† props ï¼Œæ¯”å¦‚äº‹ä»¶æ”¶é›†ï¼Œstyleï¼ŒclassName å¤„ç†ï¼Œåœ¨ 15 ç« è®²åˆ°è¿‡ã€‚</p> <h4 id="commit"><a href="#commit" class="header-anchor">#</a> commit</h4> <p>ä¸»è¦åšçš„äº‹å°±æ˜¯æ‰§è¡Œ effectListï¼Œæ›´æ–° DOMï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸï¼Œè·å– ref ç­‰æ“ä½œ</p> <h4 id="è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾"><a href="#è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾" class="header-anchor">#</a> è°ƒå’Œ + å¼‚æ­¥è°ƒåº¦ æµç¨‹æ€»å›¾</h4> <p><img src="/docs/assets/img/fiber-async.95e78237.jpg" alt="å›¾ç‰‡"></p> <h3 id="question"><a href="#question" class="header-anchor">#</a> Question</h3> <ul><li>ä»€ä¹ˆæ˜¯ fiber ï¼Ÿ</li> <li>Fiber æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li> <li>Fiber root å’Œ root fiber æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li> <li>ä¸åŒ fiber ä¹‹é—´å¦‚ä½•å»ºç«‹èµ·å…³è”çš„ï¼Ÿ</li> <li>React è°ƒå’Œæµç¨‹ï¼Ÿ</li> <li>ä¸¤å¤§é˜¶æ®µ commit å’Œ render éƒ½åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</li> <li>ä»€ä¹ˆæ˜¯åŒç¼“å†²æ ‘ï¼Ÿ</li> <li>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</li> <li>Fiber æ·±åº¦éå†æµç¨‹ï¼Ÿ</li> <li>Fiber çš„è°ƒå’Œèƒ½ä¸­æ–­å—ï¼Ÿ</li> <li>å¦‚ä½•ä¸­æ–­ï¼Ÿ</li> <li>å‡è®¾æŸä¸ª 5 å±‚ Fiber æ•°å·²ç»åˆ›å»ºå®Œæ¯•ï¼Œ3 å±‚å‘ç”Ÿæ›´æ–°æ—¶ï¼Œè°ƒå’Œä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹è°ƒå’Œ</li> <li>element å’Œ Fiber å¦‚ä½•è”ç³»èµ·æ¥çš„</li></ul> <h2 id="hooks-åŸç†"><a href="#hooks-åŸç†" class="header-anchor">#</a> Hooks åŸç†</h2> <h3 id="questions"><a href="#questions" class="header-anchor">#</a> Questions</h3> <p>â‘  React Hooks ä¸ºä»€ä¹ˆå¿…é¡»åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ‰§è¡Œï¼ŸReact å¦‚ä½•èƒ½å¤Ÿç›‘å¬ React Hooks åœ¨å¤–éƒ¨æ‰§è¡Œ<br>
å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚<br>
â‘¡ React Hooks å¦‚ä½•æŠŠçŠ¶æ€ä¿å­˜èµ·æ¥ï¼Ÿä¿å­˜çš„ä¿¡æ¯å­˜åœ¨äº†å“ªé‡Œï¼Ÿ<br>
â‘¢ React Hooks ä¸ºä»€ä¹ˆä¸èƒ½å†™åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Ÿ<br>
â‘£ useMemo å†…éƒ¨å¼•ç”¨ useRef ä¸ºä»€ä¹ˆä¸éœ€è¦æ·»åŠ ä¾èµ–é¡¹ï¼Œè€Œ useState å°±è¦æ·»åŠ ä¾èµ–é¡¹ã€‚<br>
â‘¤ useEffect æ·»åŠ ä¾èµ–é¡¹ props.a ï¼Œä¸ºä»€ä¹ˆ props.a æ”¹å˜ï¼ŒuseEffect å›è°ƒå‡½æ•° create é‡<br>
æ–°æ‰§è¡Œã€‚<br>
â‘¥ React å†…éƒ¨å¦‚ä½•åŒºåˆ« useEffect å’Œ useLayoutEffect ï¼Œæ‰§è¡Œæ—¶æœºæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p> <h3 id=""><a href="#" class="header-anchor">#</a></h3> <h2 id="éšè®°-2"><a href="#éšè®°-2" class="header-anchor">#</a> éšè®°</h2> <ul><li>å¦‚ä½•åˆ†äº«</li> <li>æ¯ç« ä»¥åéœ€è¦çŸ¥é“è¯¥ç« è¦ç‚¹,ç›¸å…³é—®é¢˜é¢è¯•æ—¶å¯èƒ½é—®åˆ°</li></ul></div> <div class="article-copyright"><ul><li class="article-copyright__item"><strong class="article-copyright__title">Last-updated<span>:</span></strong> <p class="article-copyright__text"></p></li> <li class="article-copyright__item"><strong class="article-copyright__title">Copyright<span>:</span></strong> <p class="article-copyright__text">è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²åï¼ˆ<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">CC
                BY-NC-ND 4.0</a>ï¼‰</p></li> <li class="article-copyright__item"><strong class="article-copyright__title">Link<span>:</span></strong> <p class="article-copyright__text"><a href="/post/2022/04/02/react-advanced-summary.html" title="ã€ŠReactè¿›é˜¶æŒ‡å—ã€‹ç¬”è®°">/post/2022/04/02/react-advanced-summary.html</a></p></li></ul></div> <!----></div> <div class="article-footer"><ul class="post-tag"><li class="post-tag__item"><a href="/docs/tags/React"><span># React</span></a></li><li class="post-tag__item"><a href="/docs/tags/Reading"><span># Reading</span></a></li></ul> <div class="post-operate"><a href="/docs/post/2022/04/02/nodejs.html" class="post-operate__prev">Nodejsæ¦‚è§ˆ</a> <a href="/docs/post/2022/04/02/react-basic.html" class="post-operate__next">Reactè¯­æ³•åŸºç¡€</a></div> <!----></div></article></div></div> <svg style="display:none;"><symbol id="theme-icon-auto" viewBox="0 0 32 32"><path d="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM4 16c0-6.627 5.373-12 12-12v24c-6.627 0-12-5.373-12-12z"></path></symbol> <symbol id="theme-icon-sun" viewBox="0 0 32 32"><path d="M16 26c1.105 0 2 0.895 2 2v2c0 1.105-0.895 2-2 2s-2-0.895-2-2v-2c0-1.105 0.895-2 2-2zM16 6c-1.105 0-2-0.895-2-2v-2c0-1.105 0.895-2 2-2s2 0.895 2 2v2c0 1.105-0.895 2-2 2zM30 14c1.105 0 2 0.895 2 2s-0.895 2-2 2h-2c-1.105 0-2-0.895-2-2s0.895-2 2-2h2zM6 16c0 1.105-0.895 2-2 2h-2c-1.105 0-2-0.895-2-2s0.895-2 2-2h2c1.105 0 2 0.895 2 2zM25.899 23.071l1.414 1.414c0.781 0.781 0.781 2.047 0 2.828s-2.047 0.781-2.828 0l-1.414-1.414c-0.781-0.781-0.781-2.047 0-2.828s2.047-0.781 2.828 0zM6.101 8.929l-1.414-1.414c-0.781-0.781-0.781-2.047 0-2.828s2.047-0.781 2.828 0l1.414 1.414c0.781 0.781 0.781 2.047 0 2.828s-2.047 0.781-2.828 0zM25.899 8.929c-0.781 0.781-2.047 0.781-2.828 0s-0.781-2.047 0-2.828l1.414-1.414c0.781-0.781 2.047-0.781 2.828 0s0.781 2.047 0 2.828l-1.414 1.414zM6.101 23.071c0.781-0.781 2.047-0.781 2.828 0s0.781 2.047 0 2.828l-1.414 1.414c-0.781 0.781-2.047 0.781-2.828 0s-0.781-2.047 0-2.828l1.414-1.414z"></path> <path d="M16 8c-4.418 0-8 3.582-8 8s3.582 8 8 8c4.418 0 8-3.582 8-8s-3.582-8-8-8zM16 21c-2.761 0-5-2.239-5-5s2.239-5 5-5 5 2.239 5 5-2.239 5-5 5z"></path></symbol> <symbol id="theme-icon-moon" viewBox="0 0 18 18"><path d="M7.246 3.255c-0.251 0.828-0.322 1.71-0.198 2.597 0.366 2.63 2.455 4.723 5.080 5.089 0.282 0.040 0.568 0.060 0.85 0.060 0.599 0 1.184-0.087 1.742-0.257-0.674 2.215-2.642 3.926-4.973 4.21-0.254 0.031-0.51 0.047-0.762 0.047-1.713 0-3.349-0.738-4.486-2.024-1.152-1.304-1.669-2.987-1.457-4.739 0.284-2.335 1.992-4.307 4.204-4.982zM8.985 1c-0.362 0-0.731 0.024-1.104 0.075-3.543 0.48-6.388 3.364-6.82 6.92-0.592 4.867 3.184 9.005 7.924 9.005 0.33 0 0.665-0.020 1.003-0.062 3.549-0.433 6.428-3.283 6.907-6.833 0.052-0.383 0.076-0.761 0.075-1.134-0.002-0.583-0.482-0.972-0.996-0.972-0.209 0-0.424 0.065-0.614 0.207-0.665 0.498-1.489 0.793-2.383 0.793-0.188 0-0.38-0.013-0.574-0.040-1.732-0.242-3.137-1.649-3.378-3.385-0.155-1.115 0.149-2.156 0.751-2.963 0.415-0.657 0.025-1.609-0.764-1.612-0.009 0-0.018 0-0.028 0v0z"></path></symbol> <symbol id="theme-icon-palette" viewBox="0 0 1024 1024"><path d="M745.984 512q25.984 0 45.013333-18.005333t18.986667-45.994667-18.986667-45.994667-45.013333-18.005333-45.013333 18.005333-18.986667 45.994667 18.986667 45.994667 45.013333 18.005333zM617.984 342.016q25.984 0 45.013333-18.986667t18.986667-45.013333-18.986667-45.013333-45.013333-18.986667-45.013333 18.986667-18.986667 45.013333 18.986667 45.013333 45.013333 18.986667zM406.016 342.016q25.984 0 45.013333-18.986667t18.986667-45.013333-18.986667-45.013333-45.013333-18.986667-45.013333 18.986667-18.986667 45.013333 18.986667 45.013333 45.013333 18.986667zM278.016 512q25.984 0 45.013333-18.005333t18.986667-45.994667-18.986667-45.994667-45.013333-18.005333-45.013333 18.005333-18.986667 45.994667 18.986667 45.994667 45.013333 18.005333zM512 128q157.994667 0 271.018667 100.010667t112.981333 242.005333q0 88.021333-63.018667 150.016t-150.997333 61.994667l-73.984 0q-27.989333 0-45.994667 18.986667t-18.005333 45.013333q0 22.016 16 41.984t16 43.989333q0 27.989333-18.005333 45.994667t-45.994667 18.005333q-160 0-272-112t-112-272 112-272 272-112z" p-id="10529"></path></symbol> </svg></div><div class="global-ui"><div class="float-menu-wrap"><!----> <div class="float-menu__list"><span class="icon-up"></span> <span title="auto" class="theme-mode-setting"><svg class="theme-icon theme-icon-auto"><use xlink:href="#theme-icon-auto"></use></svg></span> <!----> <span class="icon-toc"></span> <span class="icon-search"></span></div> <div class="float-menu"><svg width="100%" height="100%" class="float-menu__progress"><circle stroke-dasharray="0% 301.59289474462014%" stroke="currentcolor" stroke-width="2%" fill="none" r="48%" cx="50%" cy="50%"></circle></svg> <div class="float-menu__dot"></div></div></div><div class="theme-search" style="display:none;"><div class="theme-search__inner"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a class="icon-exit"></a></div></div></div></div>
    <script src="/docs/assets/js/app.90fe924d.js" defer></script><script src="/docs/assets/js/4.2437bced.js" defer></script><script src="/docs/assets/js/12.f6f8b844.js" defer></script><script src="/docs/assets/js/6.b41b8e83.js" defer></script>
  </body>
</html>