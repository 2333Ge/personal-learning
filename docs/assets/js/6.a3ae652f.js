(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{484:function(t,s,a){t.exports=a.p+"assets/img/JSX-babel.2bd77664.jpg"},485:function(t,s,a){t.exports=a.p+"assets/img/jsx-creatElement.516f32d7.jpg"},486:function(t,s,a){t.exports=a.p+"assets/img/props-to.e4950e4a.jpg"},487:function(t,s,a){t.exports=a.p+"assets/img/lifecycle-mont.24fff6e1.jpg"},488:function(t,s,a){t.exports=a.p+"assets/img/lifecycle-update.090326d6.jpg"},489:function(t,s,a){t.exports=a.p+"assets/img/lifecycle-all-class.5860a3e1.jpg"},490:function(t,s,a){t.exports=a.p+"assets/img/render-step.09225c1d.jpg"},491:function(t,s,a){t.exports=a.p+"assets/img/fiber-async.95e78237.jpg"},562:function(t,s,a){"use strict";a.r(s);var n=a(9),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"å‰è¨€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),n("blockquote",[n("p",[t._v("åŸæ–‡ï¼š"),n("a",{attrs:{href:"https://juejin.cn/book/6945998773818490884",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠReact è¿›é˜¶æŒ‡å—ã€‹"),n("OutboundLink")],1),t._v("\nä¸ªäºº demo: demo/react-demo")])]),t._v(" "),n("p",[t._v("æºç ä¸‹è½½ï¼š")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://hub.fastgit.org/facebook/react.git\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout v16.19\n")])])]),n("h2",{attrs:{id:"è®¤è¯†-jsx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¤è¯†-jsx"}},[t._v("#")]),t._v(" è®¤è¯† JSX")]),t._v(" "),n("h3",{attrs:{id:"jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jsx-è¢«-react-å¤„ç†æˆä»€ä¹ˆ"}},[t._v("#")]),t._v(" JSX è¢« React å¤„ç†æˆä»€ä¹ˆ")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const toLearn = [ 'react' , 'vue' , 'webpack' , 'nodejs'  ]\n\nconst TextComponent = ()=> <div> hello , i am function component </div>\n\nclass Index extends React.Component{\n    status = false /* çŠ¶æ€ */\n    renderFoot=()=> <div> i am foot</div>\n    render(){\n        /* ä»¥ä¸‹éƒ½æ˜¯å¸¸ç”¨çš„jsxå…ƒç´ èŠ‚ */\n        return <div style={{ marginTop:'100px' }}   >\n            { /* element å…ƒç´ ç±»å‹ */ }\n            <div>hello,world</div>\n            { /* fragment ç±»å‹ */ }\n            <React.Fragment>\n                <div> ğŸ‘½ğŸ‘½ </div>\n            </React.Fragment>\n            { /* text æ–‡æœ¬ç±»å‹ */ }\n            my name is alien\n            { /* æ•°ç»„èŠ‚ç‚¹ç±»å‹ */ }\n            { toLearn.map(item=> <div key={item} >let us learn { item } </div> ) }\n            { /* ç»„ä»¶ç±»å‹ */ }\n            <TextComponent/>\n            { /* ä¸‰å…ƒè¿ç®— */  }\n            { this.status ? <TextComponent /> : <div>ä¸‰å…ƒè¿ç®—</div> }\n            { /* å‡½æ•°æ‰§è¡Œ */ }\n            { this.renderFoot() }\n            <button onClick={ ()=> console.log( this.render() ) } >æ‰“å°renderåçš„å†…å®¹</button>\n        </div>\n    }\n}\n")])])]),n("ol",[n("li",[t._v("babel ç¼–è¯‘ï¼šReact.createElement, æ³¨æ„ 3 ä¸ªå‚æ•°ä½œç”¨\n"),n("img",{attrs:{src:a(484),alt:"å›¾ç‰‡"}})]),t._v(" "),n("li",[t._v("createElement å¤„ç†åçš„æ ·å­ æ³¨æ„è½¬æ¢ç±»å‹çš„æ˜ ç…§å…³ç³»\n"),n("img",{attrs:{src:a(485),alt:"å›¾ç‰‡"}})]),t._v(" "),n("li",[t._v("React åº•å±‚è°ƒå’Œå¤„ç†åï¼Œç»ˆå°†å˜æˆä»€ä¹ˆï¼Ÿ\nReact element å¯¹è±¡çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½ä¼šå½¢æˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ fiber å¯¹è±¡ï¼Œç„¶åé€šè¿‡ siblingã€returnã€child å°†æ¯ä¸€ä¸ª fiber å¯¹è±¡è”ç³»èµ·æ¥ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"react-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-api"}},[t._v("#")]),t._v(" React API")]),t._v(" "),n("ul",[n("li",[t._v("React.Children.toArrayï¼Œæ‰å¹³åŒ–ï¼Œè§„èŒƒåŒ– children æ•°ç»„")]),t._v(" "),n("li",[t._v("React.Children.forEachï¼Œéå† childrenï¼Œå†…éƒ¨å·²æ‰å¹³åŒ– children")]),t._v(" "),n("li",[t._v("React.createElement")]),t._v(" "),n("li",[t._v("react.cloneElement")])]),t._v(" "),n("h3",{attrs:{id:"qa"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa"}},[t._v("#")]),t._v(" QA")]),t._v(" "),n("ol",[n("li",[t._v("è€ç‰ˆæœ¬çš„ React ä¸­ï¼Œä¸ºä»€ä¹ˆå†™ jsx çš„æ–‡ä»¶è¦é»˜è®¤å¼•å…¥ React")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React from 'react'\nfunction Index(){\n    return <div>hello,world</div>\n}\n")])])]),n("p",[t._v("ç­”ï¼šå› ä¸º jsx åœ¨è¢« babel ç¼–è¯‘åï¼Œå†™çš„ jsx ä¼šå˜æˆä¸Šè¿° React.createElement å½¢å¼ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ Reactï¼Œé˜²æ­¢æ‰¾ä¸åˆ° React å¼•èµ·æŠ¥é”™ã€‚")]),t._v(" "),n("h2",{attrs:{id:"component"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#component"}},[t._v("#")]),t._v(" Component")]),t._v(" "),n("p",[t._v("å¯é€šè¿‡åŸå‹é“¾çš„æ–¹å¼ç»™ç±»å¢åŠ é»˜è®¤æ“ä½œ")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("class Index extends React.Component{\n    constructor(...arg){\n       super(...arg)                        /* æ‰§è¡Œ react åº•å±‚ Component å‡½æ•° */\n    }\n    state = {}                              /* state */\n    static number = 1                       /* å†…ç½®é™æ€å±æ€§ */\n    componentDidMount(){                    /* ç”Ÿå‘½å‘¨æœŸ */\n        console.log(Index.number,Index.number1) // æ‰“å° 1 , 2\n    }\n    render(){                               /* æ¸²æŸ“å‡½æ•° */\n        return <div style={{ marginTop:'50px' }} onClick={ this.handerClick }  >hello,React!</div>\n    }\n}\nIndex.number1 = 2                           /* å¤–ç½®é™æ€å±æ€§ */\nIndex.prototype.handleClick = ()=> console.log(222) /* æ–¹æ³•: ç»‘å®šåœ¨ Index åŸå‹é“¾çš„ æ–¹æ³•*/\n")])])]),n("p",[t._v("ç»„ä»¶çš„ç»§æ‰¿ï¼šstate å’Œç”Ÿå‘½å‘¨æœŸä¼šè¢«ç»§æ‰¿åçš„ç»„ä»¶ä¿®æ”¹ã€‚åƒä¸‹åˆ— demo ä¸­ï¼ŒPerson ç»„ä»¶ä¸­çš„ componentDidMount ç”Ÿå‘½å‘¨æœŸå°†ä¸ä¼šè¢«æ‰§è¡Œã€‚")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("/* äººç±» */\nclass Person extends React.Component{\n    constructor(props){\n        super(props)\n        console.log('hello , i am person')\n    }\n    componentDidMount(){ console.log(1111)  }\n    eat(){    /* åƒé¥­ */ }\n    sleep(){  /* ç¡è§‰ */  }\n    ddd(){   console.log('æ‰“è±†è±†')  /* æ‰“è±†è±† */ }\n    render(){\n        return <div>\n            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸€ä¸ªperson\n        </div>\n    }\n}\n/* ç¨‹åºå‘˜ */\nclass Programmer extends Person{\n    constructor(props){\n        super(props)\n        console.log('hello , i am Programmer too')\n    }\n    componentDidMount(){  console.log(this)  }\n    code(){ /* æ•²ä»£ç  */ }\n    render(){\n        return <div style={ { marginTop:'50px' } } >\n            { super.render() } { /* è®© Person ä¸­çš„ render æ‰§è¡Œ */ }\n            æˆ‘è¿˜æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼    { /* æ·»åŠ è‡ªå·±çš„å†…å®¹ */ }\n        </div>\n    }\n}\nexport default Programmer\n")])])]),n("p",[t._v("ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("ç±»ç»„ä»¶çš„æœ¬è´¨å°±æ˜¯ ç±»å’Œå‡½æ•°è¿˜æœ‰ oop æ€æƒ³ä¸­çš„ç»§æ‰¿ï¼Œåœ¨æ­¤ä¹‹ä¸Šéœ€è¦å†…ç½®å¤„ç† state å’Œ props ç»„ä»¶çš„çŠ¶æ€ç»´æŠ¤ï¼ŒçŠ¶æ€ -> ui -> æ¸²æŸ“")]),t._v(" "),n("li",[t._v("å‡½æ•°ç»„ä»¶ æ²¡æœ‰å®ä¾‹åŒ–çš„æ¦‚å¿µï¼ŒFP æ€æƒ³ï¼Œæ¯ä¸ªç»„ä»¶åº”è¯¥åªå¤„ç†ä¸€ä¸ªé€»è¾‘äº‹ç‰©ä¸æƒ³ class ç»„ä»¶é‚£ä¹ˆå¤åˆï¼Œå¦å¤–å®ƒæ²¡æœ‰è½¬æ€å­˜å‚¨èƒ½åŠ›å¿…é¡»ä¾èµ– hook")])]),t._v(" "),n("h3",{attrs:{id:"state"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[t._v("#")]),t._v(" State")]),t._v(" "),n("p",[t._v("ç»„ä»¶åˆå§‹åŒ–è¿‡ç¨‹ä¸­ç»‘å®šäº†è´Ÿè´£æ›´æ–°çš„ Updater å¯¹è±¡ï¼Œå¯¹äºå¦‚æœè°ƒç”¨ setState æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ React åº•å±‚è°ƒç”¨ Updater å¯¹è±¡ä¸Šçš„ enqueueSetState æ–¹æ³•ã€‚")]),t._v(" "),n("h4",{attrs:{id:"ç±»ç»„ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç±»ç»„ä»¶"}},[t._v("#")]),t._v(" ç±»ç»„ä»¶")]),t._v(" "),n("p",[n("strong",[t._v("unstable_batchedUpdates")]),t._v(":å¼‚æ­¥ç¯å¢ƒä¸‹ï¼Œç»§å¼€å¯æ‰¹é‡æ›´æ–°æ¨¡å¼")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("setTimeout(()=>{\n    unstable_batchedUpdates(()=>{\n        this.setState({ number:this.state.number + 1 })\n        console.log(this.state.number)\n        this.setState({ number:this.state.number + 1})\n        console.log(this.state.number)\n        this.setState({ number:this.state.number + 1 })\n        console.log(this.state.number)\n    })\n})\n")])])]),n("p",[n("strong",[t._v("flushSync")]),t._v(":æå‡æ›´æ–°ä¼˜å…ˆçº§")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("handerClick=()=>{\n    setTimeout(()=>{\n        this.setState({ number: 1  })\n    })\n    this.setState({ number: 2  })\n    ReactDOM.flushSync(()=>{\n        this.setState({ number: 3  })\n    })\n    this.setState({ number: 4  })\n}\nrender(){\n   console.log(this.state.number)\n   return ...\n}\n")])])]),n("h4",{attrs:{id:"å‡½æ•°ç»„ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°ç»„ä»¶"}},[t._v("#")]),t._v(" å‡½æ•°ç»„ä»¶")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[ â‘ state , â‘¡dispatch ] = useState(â‘¢initData)\n")])])]),n("ul",[n("li",[t._v("æ³¨æ„ â‘¡ â‘¢ æ˜¯å‡½æ•°çš„æƒ…å†µ")])]),t._v(" "),n("h4",{attrs:{id:"qa-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa-2"}},[t._v("#")]),t._v(" QA")]),t._v(" "),n("ol",[n("li",[t._v("ä¸ºä»€ä¹ˆå¼‚æ­¥ç¯å¢ƒä¸­æ‰¹é‡æ›´æ–°è§„åˆ™è¢«æ‰“ç ´ï¼Œ setState åèµ° render??????å®å¾®ä»»åŠ¡")]),t._v(" "),n("li",[t._v("useState å‚æ•°å¯ä»¥æ˜¯ä¸ªå‡½æ•°ï¼Œåˆå§‹å€¼æ˜¯å‡½æ•°æ‰§è¡Œåçš„ç»“æœï¼Ÿ")]),t._v(" "),n("li",[t._v("RN æ²¡æœ‰ ReactDOM.flushSync")]),t._v(" "),n("li",[t._v("legacy æ¨¡å¼ï¼Œè¿˜æœ‰ blocking æ¨¡å¼ã€concurrent æ¨¡å¼æ¦‚å¿µ")]),t._v(" "),n("li",[t._v("ï¼ˆå›¾ï¼‰åˆå¹¶ state å’Œè°ƒå’Œæ ‘çš„é¡ºåºæ˜¯å¦åº”è¯¥åè¿‡æ¥")]),t._v(" "),n("li",[t._v("åˆå¹¶ state çš„è¿‡ç¨‹åœ¨å“ªå„¿")]),t._v(" "),n("li",[t._v("ä¸‹åˆ—ç‚¹å‡»äº‹ä»¶çš„æ‰“å°ç»“æœ")]),t._v(" "),n("li",[t._v("å®ä»»åŠ¡å¾®ä»»åŠ¡ï¼Ÿjs ä»»åŠ¡ç³»ç»Ÿ")]),t._v(" "),n("li",[t._v("useState åˆå§‹åŒ–å¯¹è±¡æ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æƒ…å†µï¼Œæ”¹å˜åˆå§‹å¯¹è±¡ï¼ŒuseState çš„å¯¹è±¡ä¼šæ”¹å˜å—")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("handleClick= () => {\n          this.setState({ number:this.state.number + 1 },()=>{   console.log( 'callback1', this.state.number)  })\n          console.log(this.state.number)\n          this.setState({ number:this.state.number + 2 },()=>{   console.log( 'callback2', this.state.number)  })\n          console.log(this.state.number)\n          this.setState({ number:this.state.number + 3 },()=>{   console.log( 'callback3', this.state.number)  })\n          console.log(this.state.number)\n    }\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("0, 0, 0, callback1 3 ,callback2 3 ,callback3 3\n")])])]),n("h3",{attrs:{id:"è‡ªå®šä¹‰-hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰-hooks"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰ Hooks")]),t._v(" "),n("h4",{attrs:{id:"qa-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa-3"}},[t._v("#")]),t._v(" QA")]),t._v(" "),n("ul",[n("li",[t._v("æ‰§è¡Œå‰¯ä½œç”¨ã€demo å¥½åƒæœ‰é—®é¢˜ï¼Œæ•²ä¸€ä¸ª")])]),t._v(" "),n("h2",{attrs:{id:"éšè®°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éšè®°"}},[t._v("#")]),t._v(" éšè®°")]),t._v(" "),n("ul",[n("li",[t._v("æ‰å¹³åŒ–çš„æ„æ€ï¼Ÿæ ‘å½¢ç»“æ„å¦‚ä½•æ‰å¹³åŒ–")]),t._v(" "),n("li",[t._v("fiber å¯¹è±¡")])]),t._v(" "),n("h2",{attrs:{id:"æ·±å…¥-props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å…¥-props"}},[t._v("#")]),t._v(" æ·±å…¥ props")]),t._v(" "),n("h3",{attrs:{id:"props-æ“ä½œæŠ€å·§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#props-æ“ä½œæŠ€å·§"}},[t._v("#")]),t._v(" props æ“ä½œæŠ€å·§")]),t._v(" "),n("p",[t._v("æŠ½è±¡ Props ä¸€èˆ¬ç”¨äº"),n("strong",[t._v("è·¨å±‚çº§ä¼ é€’ props")]),t._v("ï¼Œä¸€èˆ¬ä¸éœ€è¦å…·ä½“æŒ‡å‡º props ä¸­æŸä¸ªå±æ€§ï¼Œè€Œæ˜¯å°† props ç›´æ¥ä¼ å…¥æˆ–è€…æ˜¯æŠ½ç¦»åˆ°å­ç»„ä»¶ä¸­")]),t._v(" "),n("h4",{attrs:{id:"æ··å…¥-props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ··å…¥-props"}},[t._v("#")]),t._v(" æ··å…¥ props")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Son")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" hello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("world "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Father")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fatherProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"let us learn React !"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Son "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("fatherProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" indexProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alien"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Father "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("indexProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("æ‰“å°\n"),n("img",{attrs:{src:a(486),alt:"å›¾ç‰‡"}}),t._v("\nå°† Index ç»„ä»¶ indexProps æŠ½è±¡ä¼ é€’ç»™ Sonï¼Œä¸€æ–¹é¢æ··å…¥ fatherProps")]),t._v(" "),n("h4",{attrs:{id:"æŠ½ç¦»-props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æŠ½ç¦»-props"}},[t._v("#")]),t._v(" æŠ½ç¦» props")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Son")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" hello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("world "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Father")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("fatherProps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Son "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("fatherProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" indexProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alien"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"let us learn React !"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Father "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("indexProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("å°† indexProps ä¸­çš„ age å±æ€§æŠ½ç¦»å‡ºæ¥ã€‚")]),t._v(" "),n("h4",{attrs:{id:"éšå¼æ³¨å…¥-props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éšå¼æ³¨å…¥-props"}},[t._v("#")]),t._v(" éšå¼æ³¨å…¥ props")]),t._v(" "),n("p",[t._v("React.cloneElement")]),t._v(" "),n("h4",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),n("ul",[n("li",[t._v("å¯¹ props ä¸­ children çš„æ“ä½œï¼Œæ˜¾ç¤ºä¸å¦ã€åˆ¤æ–­ç±»å‹åšè‡ªå·±çš„æ¸²æŸ“é€»è¾‘ç­‰")]),t._v(" "),n("li",[t._v("å¯¹ props ä¸­çš„ children çš„ props æ“ä½œï¼Œæ³¨å…¥æ–°çš„ props ç­‰")])]),t._v(" "),n("p",[t._v("å®¹å™¨æŠ€å·§ => è·å– children => åšè‡ªå®šä¹‰æ“ä½œ")]),t._v(" "),n("h4",{attrs:{id:"qa-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa-4"}},[t._v("#")]),t._v(" QA")]),t._v(" "),n("p",[t._v("FormItem.displayName ä¸ºä»€ä¹ˆè¿™ä¹ˆå– children.type.displayName")]),t._v(" "),n("h2",{attrs:{id:"ç”Ÿå‘½å‘¨æœŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),n("ul",[n("li",[t._v("æŒ‚è½½\n"),n("img",{attrs:{src:a(487),alt:"å›¾ç‰‡"}})])]),t._v(" "),n("p",[t._v("constructor -> getDerivedStateFromProps / componentWillMount -> render -> componentDidMount")]),t._v(" "),n("ul",[n("li",[t._v("æ›´æ–°\n"),n("img",{attrs:{src:a(488),alt:"å›¾ç‰‡"}})])]),t._v(" "),n("p",[t._v("componentWillReceiveProps( props æ”¹å˜) / getDerivedStateFromProp -> shouldComponentUpdate -> componentWillUpdate -> render -> getSnapshotBeforeUpdate -> componentDidUpdate")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é”€æ¯\ncommit é˜¶æ®µè°ƒç”¨ componentWillUnmount")])]),t._v(" "),n("li",[n("p",[t._v("æ€»è§ˆ\n"),n("img",{attrs:{src:a(489),alt:"å›¾ç‰‡"}})])])]),t._v(" "),n("h3",{attrs:{id:"å„é˜¶æ®µè¦ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å„é˜¶æ®µè¦ç‚¹"}},[t._v("#")]),t._v(" å„é˜¶æ®µè¦ç‚¹")]),t._v(" "),n("ul",[n("li",[t._v("getDerivedStateFromPropsï¼šåªæ˜¯é™æ€æ–¹æ³•ã€è®¿é—®ä¸åˆ° thisï¼Œç»„ä»¶æ›´æ–°ï¼Œå°±ä¼šæ‰§è¡Œ getDerivedStateFromPropsï¼Œä¸ç®¡æ˜¯ props æ”¹å˜ï¼Œè¿˜æ˜¯ setState ï¼Œæˆ–æ˜¯ forceUpdate ã€‚")]),t._v(" "),n("li",[t._v("getSnapshotBeforeUpdate: è·å– æ›´æ–°å‰ DOM ä¿¡æ¯çš„æœ€ä½³æ—¶æœŸï¼ŒgetSnapshotBeforeUpdate å°†è¿”å›ä¸€ä¸ªå€¼ä½œä¸ºä¸€ä¸ª snapShot(å¿«ç…§)ï¼Œä¼ é€’ç»™ componentDidUpdate ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°")])]),t._v(" "),n("h2",{attrs:{id:"context"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[t._v("#")]),t._v(" context")]),t._v(" "),n("h3",{attrs:{id:"consumer-çš„ä¸‰ç§å†™æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#consumer-çš„ä¸‰ç§å†™æ³•"}},[t._v("#")]),t._v(" consumer çš„ä¸‰ç§å†™æ³•")]),t._v(" "),n("ul",[n("li",[t._v("useContext")]),t._v(" "),n("li",[t._v("å‡½æ•°å¼")]),t._v(" "),n("li",[t._v("contextType")])]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ThemeContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç±»ç»„ä»¶ - contextType æ–¹å¼")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerDemo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" background "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" background "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("æ¶ˆè´¹è€…")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nConsumerDemo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contextType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ThemeContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Son")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerDemo")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"provider-ç‰¹æ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#provider-ç‰¹æ€§"}},[t._v("#")]),t._v(" Provider ç‰¹æ€§")]),t._v(" "),n("ol",[n("li",[t._v("Provider ä½œä¸ºæä¾›è€…ä¼ é€’ context ï¼Œprovider ä¸­ value å±æ€§æ”¹å˜ä¼šä½¿æ‰€æœ‰æ¶ˆè´¹ context çš„ç»„ä»¶é‡æ–°æ›´æ–°ã€‚")]),t._v(" "),n("li",[t._v("Provider å¯ä»¥é€å±‚ä¼ é€’ contextï¼Œä¸‹ä¸€å±‚ Provider ä¼šè¦†ç›–ä¸Šä¸€å±‚ Providerã€‚")])]),t._v(" "),n("h3",{attrs:{id:"qa-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa-5"}},[t._v("#")]),t._v(" QA")]),t._v(" "),n("ul",[n("li",[t._v("contextType åº•å±‚å¦‚ä½•å¤„ç†çš„")])]),t._v(" "),n("h3",{attrs:{id:"æ‹“å±•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‹“å±•"}},[t._v("#")]),t._v(" æ‹“å±•")]),t._v(" "),n("ul",[n("li",[t._v("æ³¨æ„å…¶ä¸­çš„ä¾‹å­ï¼šProvider value æ”¹å˜ å¯¼è‡´ç»„ä»¶æ ‘é‡æ–°æ¸²æŸ“çš„ä¾‹å­\n"),n("blockquote",[n("p",[t._v("æ²¡æœ‰ memo å¤„ç†ï¼ŒuseState ä¼šè®© ProviderDemo é‡æ–° render ï¼Œæ­¤æ—¶ son æ²¡æœ‰å¤„ç†ï¼Œå°±ä¼šè·Ÿéšçˆ¶ç»„ä»¶ render")])])])]),t._v(" "),n("h2",{attrs:{id:"é«˜é˜¶ç»„ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é«˜é˜¶ç»„ä»¶"}},[t._v("#")]),t._v(" é«˜é˜¶ç»„ä»¶")]),t._v(" "),n("p",[t._v("é«˜é˜¶ç»„ä»¶èƒ½å¤ç”¨å“ªäº›ä»£ç é€»è¾‘ï¼Ÿ")]),t._v(" "),n("ul",[n("li",[t._v("æ¸²æŸ“åŠ«æŒï¼šæ‡’åŠ è½½ã€åŠ¨æ€åŠ è½½ã€æ¸²æŸ“ä¸å¦ã€ç»Ÿä¸€ç©ºå±•ç¤ºã€ç»Ÿä¸€å¼‚å¸¸å±•ç¤ºã€æ›¿æ¢èŠ‚ç‚¹ç­‰")]),t._v(" "),n("li",[t._v("æ··å…¥ Props: æ–°å¢ props,ä¼ é€’å·²çŸ¥ props å€¼ï¼Œæ¯”å¦‚é¡¹ç›®ä¸­æƒ³è®©ä¸€ä¸ªé Route ç»„ä»¶ï¼Œä¹Ÿèƒ½é€šè¿‡ props è·å–è·¯ç”±å®ç°è·³è½¬ï¼Œä½†æ˜¯ä¸æƒ³é€šè¿‡çˆ¶çº§è·¯ç”±ç»„ä»¶å±‚å±‚ç»‘å®š props ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ª HOC æŠŠæ”¹å˜è·¯ç”±çš„ history å¯¹è±¡æ··å…¥ props ä¸­ï¼Œäºæ˜¯ withRoute è¯ç”Ÿäº†ã€‚")]),t._v(" "),n("li",[t._v("ç›‘æ§ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼šå¦‚å¯¹ç»„ä»¶å†…çš„ç‚¹å‡»äº‹ä»¶åšä¸€äº›ç›‘æ§ï¼Œæˆ–è€…åŠ ä¸€æ¬¡é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯¹ç°æœ‰ props åšä¸€äº›åŠ å·¥é‡æ–°ä¼ é€’")])]),t._v(" "),n("p",[t._v("ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶")]),t._v(" "),n("ul",[n("li",[t._v("å±æ€§ä»£ç†ï¼šæ— ä¾µå…¥ã€å¤šå±‚åµŒå¥—æ¯”è¾ƒå®‰å…¨ã€ä½è€¦åˆï¼Œæ³¨æ„å¤„ç† Refã€é™æ€å±æ€§")]),t._v(" "),n("li",[t._v("åå‘ç»§æ‰¿ï¼šä¾¿äºç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€å¤„ç† Refã€é™æ€å±æ€§ï¼Œå¤šä¸ªåå‘ç»§æ‰¿ä¼šç›¸äº’è¦†ç›–ï¼Œè€¦åˆè¾ƒé«˜ï¼Œéœ€è¦çŸ¥é“åŸå§‹ç»„ä»¶")])]),t._v(" "),n("h3",{attrs:{id:"ç¤ºä¾‹ä»£ç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹ä»£ç "}},[t._v("#")]),t._v(" ç¤ºä¾‹ä»£ç ")]),t._v(" "),n("ol",[n("li",[t._v("å¼ºåŒ– props")])]),t._v(" "),n("p",[t._v("åŠ å…¥ä¸€äº›å…¶ä»–çš„ props ï¼Œå¼ºåŒ–åŸå§‹ç»„ä»¶åŠŸèƒ½")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®©ç»„ä»¶ä¹Ÿå¯ä»¥è·å–åˆ°è·¯ç”±å¯¹è±¡ï¼Œè¿›è¡Œè·¯ç”±è·³è½¬ç­‰æ“ä½œ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("withRouter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" displayName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("withRouter(")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" Component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("C")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*  è·å– */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" wrappedComponentRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("remainingProps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RouterContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Consumer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Component\n              "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("remainingProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶åŸå§‹çš„props")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­˜åœ¨è·¯ç”±å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼Œhistory  location ç­‰")]),t._v("\n              ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("wrappedComponentRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("RouterContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Consumer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" displayName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WrappedComponent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ç»§æ‰¿é™æ€å±æ€§ */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hoistStatics")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" withRouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"æ³¨æ„äº‹é¡¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨æ„äº‹é¡¹"}},[t._v("#")]),t._v(" æ³¨æ„äº‹é¡¹")]),t._v(" "),n("ol",[n("li",[t._v("ä¸è¦åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æˆ–ç±»ç»„ä»¶ render å‡½æ•°ä¸­ä½¿ç”¨ HOC")])]),t._v(" "),n("p",[t._v("æ¯ä¸€æ¬¡ç±»ç»„ä»¶è§¦å‘ render æˆ–è€…å‡½æ•°ç»„ä»¶æ‰§è¡Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ WrapHomeï¼Œreact diff ä¼šåˆ¤å®šä¸¤æ¬¡ä¸æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå¸è½½è€ç»„ä»¶ï¼Œé‡æ–°æŒ‚è½½æ–°ç»„ä»¶ï¼Œé€ æˆæ–°èƒ½æµªè´¹")]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("å¤„ç† Ref")]),t._v(" "),n("li",[t._v("å¤„ç†é™æ€å±æ€§")]),t._v(" "),n("li",[t._v("å¤š HOC æ—¶ æ³¨æ„æ˜¯å¦ä¼šç›¸äº’å½±å“")])]),t._v(" "),n("h2",{attrs:{id:"æ¸²æŸ“æ§åˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¸²æŸ“æ§åˆ¶"}},[t._v("#")]),t._v(" æ¸²æŸ“æ§åˆ¶")]),t._v(" "),n("p",[t._v("useMemo åŸç†ï¼šuseMemo ä¼šè®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œ create çš„è¿”å›å€¼ï¼Œå¹¶æŠŠå®ƒç»‘å®šåœ¨å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber å¯¹è±¡ä¸Šï¼Œåªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œç¼“å­˜å€¼å°±ä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯ deps ä¸­å¦‚æœæœ‰ä¸€é¡¹æ”¹å˜ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œ create ï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„å€¼è®°å½•åˆ° fiber å¯¹è±¡ä¸Š")]),t._v(" "),n("p",[t._v("æ³¨æ„ç»™ç»„ä»¶ props ä¼ ç®­å¤´å‡½æ•°ã€å¯¹è±¡çš„æƒ…å†µï¼Œä¼šä½¿ PureComponent å¤±æ•ˆ")]),t._v(" "),n("p",[t._v("React.memo å½“äºŒä¸ªå‚æ•° compare ä¸å­˜åœ¨æ—¶ï¼Œä¼šç”¨æµ…æ¯”è¾ƒåŸåˆ™å¤„ç† props ï¼Œç›¸å½“äºä»…æ¯”è¾ƒ props ç‰ˆæœ¬çš„ pureComponent")]),t._v(" "),n("p",[t._v("æ‰“ç ´æ¸²æŸ“é™åˆ¶ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("forceUpdateã€‚ç±»ç»„ä»¶æ›´æ–°å¦‚æœè°ƒç”¨çš„æ˜¯ forceUpdate è€Œä¸æ˜¯ setState ï¼Œä¼šè·³è¿‡ PureComponent çš„æµ…æ¯”è¾ƒå’Œ shouldComponentUpdate è‡ªå®šä¹‰æ¯”è¾ƒã€‚å…¶åŸç†æ˜¯ç»„ä»¶ä¸­è°ƒç”¨ forceUpdate æ—¶å€™ï¼Œå…¨å±€ä¼šå¼€å¯ä¸€ä¸ª hasForceUpdate çš„å¼€å…³ã€‚å½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è¿™ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€ï¼Œå°±ç›´æ¥è·³è¿‡ shouldUpdate ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("context ç©¿é€ï¼Œä¸Šè¿°çš„å‡ ç§æ–¹å¼ï¼Œéƒ½ä¸èƒ½æœ¬è´¨ä¸Šé˜»æ–­ context æ”¹å˜ï¼Œè€Œå¸¦æ¥çš„æ¸²æŸ“ç©¿é€ï¼Œæ‰€ä»¥å¼€å‘è€…åœ¨ä½¿ç”¨ Context è¦æ ¼å¤–å°å¿ƒï¼Œæ—¢ç„¶é€‰æ‹©äº†æ¶ˆè´¹ context ï¼Œå°±è¦æ‰¿æ‹… context æ”¹å˜ï¼Œå¸¦æ¥çš„æ›´æ–°ä½œç”¨ã€‚")])])]),t._v(" "),n("p",[t._v("æ¸²æŸ“æµç¨‹å›¾\n"),n("img",{attrs:{src:a(490),alt:"å›¾ç‰‡"}})]),t._v(" "),n("h2",{attrs:{id:"äº‹ä»¶åŸç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶åŸç†"}},[t._v("#")]),t._v(" äº‹ä»¶åŸç†")]),t._v(" "),n("ul",[n("li",[t._v("é˜»æ­¢å†’æ³¡ï¼šReact ä¸­å¦‚æœæƒ³è¦é˜»æ­¢äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œå¯ä»¥ç”¨ e.stopPropagation()")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopPropagation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ŒhandleFatherClick äº‹ä»¶è®²ä¸åœ¨è§¦å‘ */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleFatherClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å†’æ³¡åˆ°çˆ¶çº§"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleFatherClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ç‚¹å‡»"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"fiber"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiber"}},[t._v("#")]),t._v(" Fiber")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("FiberNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fiber æ ‡ç­¾ è¯æ˜æ˜¯ä»€ä¹ˆç±»å‹fiberã€‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// keyè°ƒå’Œå­èŠ‚ç‚¹æ—¶å€™ç”¨åˆ°ã€‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// domå…ƒç´ æ˜¯å¯¹åº”çš„å…ƒç´ ç±»å‹ï¼Œæ¯”å¦‚divï¼Œç»„ä»¶æŒ‡å‘ç»„ä»¶å¯¹åº”çš„ç±»æˆ–è€…å‡½æ•°ã€‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å¯¹åº”çš„çœŸå®domå…ƒç´ ï¼Œç±»ç»„ä»¶æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼Œå¯ä»¥è¢«refè·å–ã€‚")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘çˆ¶çº§fiber")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å­çº§fiber")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘å…„å¼Ÿfiber")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç´¢å¼•")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ref "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refæŒ‡å‘ï¼Œrefå‡½æ•°ï¼Œæˆ–è€…refå¯¹è±¡ã€‚")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pendingProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ä¸€æ¬¡æ›´æ–°ä¸­ï¼Œä»£è¡¨elementåˆ›å»º")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•ä¸Šä¸€æ¬¡æ›´æ–°å®Œæ¯•åçš„props")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateQueue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç±»ç»„ä»¶å­˜æ”¾setStateæ›´æ–°é˜Ÿåˆ—ï¼Œå‡½æ•°ç»„ä»¶å­˜æ”¾")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç±»ç»„ä»¶ä¿å­˜stateä¿¡æ¯ï¼Œå‡½æ•°ç»„ä»¶ä¿å­˜hooksä¿¡æ¯ï¼Œdomå…ƒç´ ä¸ºnull")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contextæˆ–æ˜¯æ—¶é—´çš„ä¾èµ–é¡¹")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æè¿°fiberæ ‘çš„æ¨¡å¼ï¼Œæ¯”å¦‚ ConcurrentMode æ¨¡å¼")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effectTag "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoEffect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// effectæ ‡ç­¾ï¼Œç”¨äºæ”¶é›†effectList")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextEffect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å‘ä¸‹ä¸€ä¸ªeffect")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstEffect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªeffect")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastEffect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€åä¸€ä¸ªeffect")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expirationTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NoWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ä¸åŒè¿‡æœŸæ—¶é—´ï¼Œåˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¿‡æœŸï¼Œ åœ¨v17ç‰ˆæœ¬ç”¨laneè¡¨ç¤ºã€‚")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alternate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åŒç¼“å­˜æ ‘ï¼ŒæŒ‡å‘ç¼“å­˜çš„fiberã€‚æ›´æ–°é˜¶æ®µï¼Œä¸¤é¢—æ ‘äº’ç›¸äº¤æ›¿ã€‚")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"render-commit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#render-commit"}},[t._v("#")]),t._v(" render & commit")]),t._v(" "),n("h4",{attrs:{id:"render"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[t._v("#")]),t._v(" render")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// react-reconciler/src/ReactFiberWorkLoop.js")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("workLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    workInProgress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("performUnitOfWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workInProgress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è°ƒå’Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªå‘ç”Ÿæ›´æ–°çš„ fiber éƒ½ä¼šä½œä¸ºä¸€æ¬¡ workInProgress")]),t._v(" "),n("p",[t._v("workLoop å°±æ˜¯æ‰§è¡Œæ¯ä¸€ä¸ªå•å…ƒçš„è°ƒåº¦å™¨ï¼Œå¦‚æœæ¸²æŸ“æ²¡æœ‰è¢«ä¸­æ–­ï¼Œé‚£ä¹ˆ workLoop ä¼šéå†ä¸€é fiber æ ‘")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// react-reconciler/src/ReactFiberWorkLoop.js")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("performUnitOfWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  next "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unitOfWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderExpirationTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‰ç…§ child æŒ‡é’ˆé€å±‚å‘ä¸‹è°ƒå’Œï¼ŒæœŸé—´ä¼šæ‰§è¡Œå‡½æ•°ç»„ä»¶ï¼Œå®ä¾‹ç±»ç»„ä»¶ï¼Œdiff è°ƒå’Œå­èŠ‚ç‚¹ï¼Œæ‰“ä¸åŒeffectTagã€‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("next "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    next "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("completeUnitOfWork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("unitOfWork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘ä¸Šå½’å¹¶çš„è¿‡ç¨‹ï¼Œå¦‚æœæœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œä¼šè¿”å› siblingå…„å¼Ÿï¼Œæ²¡æœ‰è¿”å› return çˆ¶çº§ï¼Œä¸€ç›´è¿”å›åˆ° fiebrRoot ï¼ŒæœŸé—´å¯ä»¥å½¢æˆeffectListï¼Œå¯¹äºåˆå§‹åŒ–æµç¨‹ä¼šåˆ›å»º DOM ï¼Œå¯¹äº DOM å…ƒç´ è¿›è¡Œäº‹ä»¶æ”¶é›†ï¼Œå¤„ç†styleï¼ŒclassNameç­‰ã€‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("æ€»ç»“ beginWork ä½œç”¨å¦‚ä¸‹ï¼š")]),t._v(" "),n("p",[t._v("å¯¹äºç»„ä»¶ï¼Œæ‰§è¡Œéƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œ render ï¼Œå¾—åˆ°æœ€æ–°çš„ children ã€‚\nå‘ä¸‹éå†è°ƒå’Œ children ï¼Œå¤ç”¨ oldFiber ( diff ç®—æ³•)ï¼Œdiff æµç¨‹åœ¨ç¬¬åäºŒç« å·²ç»è®²è¿‡äº†ã€‚\næ‰“ä¸åŒçš„å‰¯ä½œç”¨æ ‡ç­¾ effectTag ï¼Œæ¯”å¦‚ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…å…ƒç´ çš„å¢åŠ ï¼Œåˆ é™¤ï¼Œæ›´æ–°ã€‚")]),t._v(" "),n("p",[t._v("completeUnitOfWork çš„æµç¨‹æ˜¯è‡ªä¸‹å‘ä¸Šçš„ï¼Œé‚£ä¹ˆ completeUnitOfWork è¿‡ç¨‹ä¸»è¦åšå†™ä»€ä¹ˆå‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("é¦–å…ˆ completeUnitOfWork ä¼šå°† effectTag çš„ Fiber èŠ‚ç‚¹ä¼šè¢«ä¿å­˜åœ¨ä¸€æ¡è¢«ç§°ä¸º effectList çš„å•å‘é“¾è¡¨ä¸­ã€‚åœ¨ commit é˜¶æ®µï¼Œå°†ä¸å†éœ€è¦éå†æ¯ä¸€ä¸ª fiber ï¼Œåªéœ€è¦æ‰§è¡Œæ›´æ–° effectList å°±å¯ä»¥äº†ã€‚\ncompleteWork é˜¶æ®µå¯¹äºç»„ä»¶å¤„ç† context ï¼›å¯¹äºå…ƒç´ æ ‡ç­¾åˆå§‹åŒ–ï¼Œä¼šåˆ›å»ºçœŸå® DOM ï¼Œå°†å­å­™ DOM èŠ‚ç‚¹æ’å…¥åˆšç”Ÿæˆçš„ DOM èŠ‚ç‚¹ä¸­ï¼›ä¼šè§¦å‘ diffProperties å¤„ç† props ï¼Œæ¯”å¦‚äº‹ä»¶æ”¶é›†ï¼Œstyleï¼ŒclassName å¤„ç†ï¼Œåœ¨ 15 ç« è®²åˆ°è¿‡ã€‚")]),t._v(" "),n("h4",{attrs:{id:"commit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit"}},[t._v("#")]),t._v(" commit")]),t._v(" "),n("p",[t._v("ä¸»è¦åšçš„äº‹å°±æ˜¯æ‰§è¡Œ effectListï¼Œæ›´æ–° DOMï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸï¼Œè·å– ref ç­‰æ“ä½œ")]),t._v(" "),n("h4",{attrs:{id:"è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒå’Œ-å¼‚æ­¥è°ƒåº¦-æµç¨‹æ€»å›¾"}},[t._v("#")]),t._v(" è°ƒå’Œ + å¼‚æ­¥è°ƒåº¦ æµç¨‹æ€»å›¾")]),t._v(" "),n("p",[n("img",{attrs:{src:a(491),alt:"å›¾ç‰‡"}})]),t._v(" "),n("h3",{attrs:{id:"question"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#question"}},[t._v("#")]),t._v(" Question")]),t._v(" "),n("ul",[n("li",[t._v("ä»€ä¹ˆæ˜¯ fiber ï¼Ÿ")]),t._v(" "),n("li",[t._v("Fiber æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),t._v(" "),n("li",[t._v("Fiber root å’Œ root fiber æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")]),t._v(" "),n("li",[t._v("ä¸åŒ fiber ä¹‹é—´å¦‚ä½•å»ºç«‹èµ·å…³è”çš„ï¼Ÿ")]),t._v(" "),n("li",[t._v("React è°ƒå’Œæµç¨‹ï¼Ÿ")]),t._v(" "),n("li",[t._v("ä¸¤å¤§é˜¶æ®µ commit å’Œ render éƒ½åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ")]),t._v(" "),n("li",[t._v("ä»€ä¹ˆæ˜¯åŒç¼“å†²æ ‘ï¼Ÿ")]),t._v(" "),n("li",[t._v("æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ")]),t._v(" "),n("li",[t._v("Fiber æ·±åº¦éå†æµç¨‹ï¼Ÿ")]),t._v(" "),n("li",[t._v("Fiber çš„è°ƒå’Œèƒ½ä¸­æ–­å—ï¼Ÿ")]),t._v(" "),n("li",[t._v("å¦‚ä½•ä¸­æ–­ï¼Ÿ")]),t._v(" "),n("li",[t._v("å‡è®¾æŸä¸ª 5 å±‚ Fiber æ•°å·²ç»åˆ›å»ºå®Œæ¯•ï¼Œ3 å±‚å‘ç”Ÿæ›´æ–°æ—¶ï¼Œè°ƒå’Œä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹è°ƒå’Œ")]),t._v(" "),n("li",[t._v("element å’Œ Fiber å¦‚ä½•è”ç³»èµ·æ¥çš„")])]),t._v(" "),n("h2",{attrs:{id:"hooks-åŸç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooks-åŸç†"}},[t._v("#")]),t._v(" Hooks åŸç†")]),t._v(" "),n("h3",{attrs:{id:"questions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#questions"}},[t._v("#")]),t._v(" Questions")]),t._v(" "),n("p",[t._v("â‘  React Hooks ä¸ºä»€ä¹ˆå¿…é¡»åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ‰§è¡Œï¼ŸReact å¦‚ä½•èƒ½å¤Ÿç›‘å¬ React Hooks åœ¨å¤–éƒ¨æ‰§è¡Œ"),n("br"),t._v("\nå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚"),n("br"),t._v("\nâ‘¡ React Hooks å¦‚ä½•æŠŠçŠ¶æ€ä¿å­˜èµ·æ¥ï¼Ÿä¿å­˜çš„ä¿¡æ¯å­˜åœ¨äº†å“ªé‡Œï¼Ÿ"),n("br"),t._v("\nâ‘¢ React Hooks ä¸ºä»€ä¹ˆä¸èƒ½å†™åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Ÿ"),n("br"),t._v("\nâ‘£ useMemo å†…éƒ¨å¼•ç”¨ useRef ä¸ºä»€ä¹ˆä¸éœ€è¦æ·»åŠ ä¾èµ–é¡¹ï¼Œè€Œ useState å°±è¦æ·»åŠ ä¾èµ–é¡¹ã€‚"),n("br"),t._v("\nâ‘¤ useEffect æ·»åŠ ä¾èµ–é¡¹ props.a ï¼Œä¸ºä»€ä¹ˆ props.a æ”¹å˜ï¼ŒuseEffect å›è°ƒå‡½æ•° create é‡"),n("br"),t._v("\næ–°æ‰§è¡Œã€‚"),n("br"),t._v("\nâ‘¥ React å†…éƒ¨å¦‚ä½•åŒºåˆ« useEffect å’Œ useLayoutEffect ï¼Œæ‰§è¡Œæ—¶æœºæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ")]),t._v(" "),n("h3",{attrs:{id:""}},[n("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),n("h2",{attrs:{id:"éšè®°-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éšè®°-2"}},[t._v("#")]),t._v(" éšè®°")]),t._v(" "),n("ul",[n("li",[t._v("å¦‚ä½•åˆ†äº«")]),t._v(" "),n("li",[t._v("æ¯ç« ä»¥åéœ€è¦çŸ¥é“è¯¥ç« è¦ç‚¹,ç›¸å…³é—®é¢˜é¢è¯•æ—¶å¯èƒ½é—®åˆ°")])])])}),[],!1,null,null,null);s.default=e.exports}}]);