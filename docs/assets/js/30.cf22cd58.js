(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{560:function(t,s,a){"use strict";a.r(s);var n=a(9),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),a("p",[t._v("å­¦ä¹ è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„")]),t._v(" "),a("ol",[a("li",[t._v("Hook åŸç†")]),t._v(" "),a("li",[t._v("å’Œ class åŒºåˆ«")]),t._v(" "),a("li",[t._v("class => hook è½¬å˜æ³¨æ„äº‹é¡¹")]),t._v(" "),a("li",[t._v("å¯¹åº” Hook çš„ä½¿ç”¨åœºæ™¯")]),t._v(" "),a("li",[t._v("ç›¸æ¯” class çš„ä¼˜ç‚¹")])]),t._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-hook"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ Hook")]),t._v(" "),a("p",[t._v("Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨"),a("strong",[t._v("å‡½æ•°ç»„ä»¶")]),t._v("é‡Œâ€œé’©å…¥â€ "),a("strong",[t._v("React state åŠç”Ÿå‘½å‘¨æœŸ")]),t._v("ç­‰ç‰¹æ€§çš„"),a("strong",[t._v("å‡½æ•°")])]),t._v(" "),a("h2",{attrs:{id:"ä¸ºä»€ä¹ˆä½¿ç”¨-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä½¿ç”¨-hook"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-intro.html#motivation",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸ºä»€ä¹ˆä½¿ç”¨ Hook"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("ç»„ä»¶é—´å¤ç”¨çŠ¶æ€é€»è¾‘å›°éš¾ï¼šåœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ï¼Œè¯¦è§"),a("a",{attrs:{href:"https://react.docschina.org/docs/hooks-custom.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡ªå®šä¹‰ Hook"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ ï¼šHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°")]),t._v(" "),a("li",[t._v("class éš¾ä»¥ç†è§£ï¼š Hook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ï¼šReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°")])]),t._v(" "),a("h2",{attrs:{id:"ä¸ä½¿ç”¨-hook-å½±å“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ä½¿ç”¨-hook-å½±å“"}},[t._v("#")]),t._v(" ä¸ä½¿ç”¨ Hook å½±å“")]),t._v(" "),a("p",[t._v("Hook æ²¡æœ‰ç ´åæ€§æ”¹åŠ¨,ä½¿ç”¨ Hook ä¸ä¼šå¯¹å·²æœ‰ç¨‹åºé€ æˆå½±å“ï¼Œ"),a("a",{attrs:{href:"https://react.docschina.org/docs/hooks-intro.html#no-breaking-changes",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦è§"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),a("ul",[a("li",[t._v("æ•°ç»„è§£æ„è¯­æ³•ä½¿è°ƒç”¨ useState å¯ä»¥ç»™ state å–ä¸åŒçš„åå­—")])]),t._v(" "),a("h3",{attrs:{id:"å¸¸è§é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜"}},[t._v("#")]),t._v(" å¸¸è§é—®é¢˜")]),t._v(" "),a("ol",[a("li",[t._v("props æ›´æ–°æ—¶éœ€è¦æ›´æ–° state çš„æƒ…å†µ")]),t._v(" "),a("li",[t._v("å‡½æ•°å¼å†™æ³•ï¼šæ›´æ–°åçš„ state é€šè¿‡å…ˆå‰çš„ state è®¡ç®—å¾—å‡º")]),t._v(" "),a("li",[t._v("class ä¸­ setState å›è°ƒæ€ä¹ˆå†™")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initialCount "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Reset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prevCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prevCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),a("p",[t._v("effect ä¼˜åŒ–æ³¨æ„äº‹é¡¹ï¼šç¡®ä¿æ•°ç»„ä¸­åŒ…å«äº†æ‰€æœ‰"),a("strong",[t._v("å¤–éƒ¨ä½œç”¨åŸŸ")]),t._v("ä¸­ä¼š"),a("strong",[t._v("éšæ—¶é—´å˜åŒ–")]),t._v("å¹¶ä¸”åœ¨ "),a("strong",[t._v("effect ä¸­ä½¿ç”¨çš„å˜é‡")])]),t._v(" "),a("p",[t._v("React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨")]),t._v(" "),a("h3",{attrs:{id:"æ— éœ€æ¸…é™¤çš„-effect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ— éœ€æ¸…é™¤çš„-effect"}},[t._v("#")]),t._v(" æ— éœ€æ¸…é™¤çš„ effect")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åœ¨ React æ›´æ–° DOM ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨åœºæ™¯ egï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ DOMï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œ")])]),t._v(" "),a("li",[a("p",[t._v("useEffect åšäº†ä»€ä¹ˆ: å‘Šè¯‰ React ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œ")])]),t._v(" "),a("li",[a("p",[t._v("useEffect ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼š å®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ useEffectï¼šå¯ä»¥åœ¨ effect ä¸­ç›´æ¥è®¿é—® state(ä½œç”¨åŸŸ) å˜é‡")])])]),t._v(" "),a("h3",{attrs:{id:"éœ€è¦æ¸…é™¤çš„-effect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#éœ€è¦æ¸…é™¤çš„-effect"}},[t._v("#")]),t._v(" éœ€è¦æ¸…é™¤çš„ effect")]),t._v(" "),a("p",[t._v("å¦‚æœä½ çš„ effect è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ŒReact å°†ä¼šåœ¨æ‰§è¡Œæ¸…é™¤æ“ä½œæ—¶è°ƒç”¨å®ƒ")]),t._v(" "),a("ul",[a("li",[t._v("React ä½•æ—¶æ¸…é™¤ effect: React ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œ")])]),t._v(" "),a("h4",{attrs:{id:"å¸¸è§é—®é¢˜-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜-2"}},[t._v("#")]),t._v(" å¸¸è§é—®é¢˜")]),t._v(" "),a("ol",[a("li",[t._v("class ç»„ä»¶ä¸­åœ¨ componentDidMount ä¸­å– props ä¸­çš„æ•°æ®ï¼Œè‹¥ props æ›´æ–°çš„è¯ï¼ˆ"),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¤ºä¾‹"),a("OutboundLink")],1),t._v("ï¼‰")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeToFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleStatusChange\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribeFromFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleStatusChange\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("useEffect ä¸­ä½¿ç”¨å»¶æ—¶å‡½æ•°æ—¶")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ª effect ä¾èµ–äº `count` state")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setCount(c => c + 1); // âœ… åœ¨è¿™ä¸ä¾èµ–äºå¤–éƒ¨çš„ `count` å˜é‡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ Bug: `count` æ²¡æœ‰è¢«æŒ‡å®šä¸ºä¾èµ–")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨ setInterval çš„å›è°ƒä¸­ï¼Œcount çš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚å› ä¸ºå½“ effect æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œå¹¶å°† count çš„å€¼è¢«ä¿å­˜åœ¨è¯¥é—­åŒ…å½“ä¸­ï¼Œä¸”åˆå€¼ä¸º 0ã€‚æ¯éš”ä¸€ç§’ï¼Œå›è°ƒå°±ä¼šæ‰§è¡Œ setCount(0 + 1)ï¼Œå› æ­¤ï¼Œcount æ°¸è¿œä¸ä¼šè¶…è¿‡ 1ã€‚")]),t._v(" "),a("h2",{attrs:{id:"useref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),a("p",[t._v("ç±»æ¯” class ç»„ä»¶ä¸­çš„å˜é‡")]),t._v(" "),a("h3",{attrs:{id:"é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜"}},[t._v("#")]),t._v(" é—®é¢˜")]),t._v(" "),a("h4",{attrs:{id:"å’Œæ™®é€šå£°æ˜ä¸€ä¸ª-let-å˜é‡æœ‰å•¥åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å’Œæ™®é€šå£°æ˜ä¸€ä¸ª-let-å˜é‡æœ‰å•¥åŒºåˆ«"}},[t._v("#")]),t._v(" å’Œæ™®é€šå£°æ˜ä¸€ä¸ª let å˜é‡æœ‰å•¥åŒºåˆ«")]),t._v(" "),a("ul",[a("li",[t._v("æ™®é€šå˜é‡åœ¨æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼ŒuseRef åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒå”¯ä¸€")])]),t._v(" "),a("p",[t._v("ç›¸å…³èµ„æ–™ï¼š"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/22486908",target:"_blank",rel:"noopener noreferrer"}},[t._v("é—­åŒ…"),a("OutboundLink")],1),t._v("\nã€Œå‡½æ•°ã€å’Œã€Œå‡½æ•°å†…éƒ¨èƒ½è®¿é—®åˆ°çš„å˜é‡ã€ï¼ˆä¹Ÿå«ç¯å¢ƒï¼‰çš„æ€»å’Œï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…")]),t._v(" "),a("h4",{attrs:{id:"å’Œ-usestate-å¼‚åŒç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å’Œ-usestate-å¼‚åŒç‚¹"}},[t._v("#")]),t._v(" å’Œ useState å¼‚åŒç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("ç›¸åŒç‚¹ï¼šéƒ½èƒ½ä¿è¯ç»„ä»¶å¤šæ¬¡æ¸²æŸ“æ˜¯å€¼ä¸å˜")]),t._v(" "),a("li",[t._v("ä¸åŒç‚¹ï¼šuseState å˜é‡æ”¹å˜ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“")])]),t._v(" "),a("h4",{attrs:{id:"ä¸ºä»€ä¹ˆ-useref-èƒ½å¤Ÿç›´æ¥å¡ç»™ç»„ä»¶çš„-ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆ-useref-èƒ½å¤Ÿç›´æ¥å¡ç»™ç»„ä»¶çš„-ref"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆ useRef èƒ½å¤Ÿç›´æ¥å¡ç»™ç»„ä»¶çš„ ref")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RefObject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" current"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"useimperativehandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#useimperativehandle",target:"_blank",rel:"noopener noreferrer"}},[t._v("useImperativeHandle"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼,é…åˆ forwardRef ä½¿ç”¨,ç±»æ¯” class ç»„ä»¶ä¸­çš„ public å±æ€§")])])}),[],!1,null,null,null);s.default=e.exports}}]);